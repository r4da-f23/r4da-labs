<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.475">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Viktoriia Semenova">
<meta name="dcterms.date" content="2023-09-13">

<title>Lab 2: Describing Variables</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="r4da-week02_files/libs/clipboard/clipboard.min.js"></script>
<script src="r4da-week02_files/libs/quarto-html/quarto.js"></script>
<script src="r4da-week02_files/libs/quarto-html/popper.min.js"></script>
<script src="r4da-week02_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="r4da-week02_files/libs/quarto-html/anchor.min.js"></script>
<link href="r4da-week02_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="r4da-week02_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="r4da-week02_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="r4da-week02_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="r4da-week02_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Lab 2: Describing Variables</h1><button type="button" class="btn code-tools-button" id="quarto-code-tools-source"><i class="bi"></i> Code</button></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Viktoriia Semenova </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 13, 2023</p>
    </div>
  </div>
  
    
  </div>
  

</header>

<div style="page-break-after: always;"></div>
<section id="last-week" class="level2">
<h2 class="anchored" data-anchor-id="last-week">Last Week</h2>
<ul>
<li><em>R universe</em>: <code>R</code>, RStudio, Quarto, <code>git</code>, GitHub</li>
<li>Programming in <code>R</code> is object-oriented</li>
<li>Quarto Markdown file (<code>qmd</code>) file anatomy</li>
</ul>
</section>
<section id="working-with-a-dataset" class="level2">
<h2 class="anchored" data-anchor-id="working-with-a-dataset">Working with a Dataset</h2>
<p>Data usually needs to be loaded into <code>R</code> rather than entered by hand. <code>R</code> can load multiple objects into the environment, which means it can load multiple datasets at once. Let’s start with one.</p>
<section id="loading-datasets" class="level3">
<h3 class="anchored" data-anchor-id="loading-datasets">Loading datasets</h3>
<p>Today we will have a look at the dataset Perceptions of Electoral Integrity.</p>
<p>First, let’s obtain the dataset. We will get it from the <code>Dataverse</code>. I have downloaded the <a href="https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/2MFQ9K">most recent version of the data</a> in <code>csv</code> format and it is located in the <code>data</code> subfolder of our <code>r4da-labs</code> project. Our dataset comes in a common format of <em>comma separated values</em> (extension <code>csv</code>). This means that columns in a dataset are separated with a comma and system will detect columns based on these commas. There are different ways to load it, but we will be using a function from the <code>readr</code> package from <em>tidyverse</em> universe to load the dataset into the environment. We already loaded <code>tidyverse</code> in teh setup chunk, so we carry on with loading the data right away:</p>
<table class="table">
<thead>
<tr class="header">
<th>Format</th>
<th>Package</th>
<th>Load Function</th>
<th>Save Function</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>.csv</code></td>
<td><code>readr</code></td>
<td><code>read_csv()</code></td>
<td><code>write_csv()</code></td>
</tr>
<tr class="even">
<td><code>.xlsx</code></td>
<td><code>readxl</code></td>
<td><code>read_excel()</code></td>
<td></td>
</tr>
<tr class="odd">
<td><code>.dta</code></td>
<td><code>haven</code></td>
<td><code>read_stata()</code></td>
<td><code>write_dta()</code></td>
</tr>
<tr class="even">
<td><code>.tsv</code></td>
<td><code>readr</code></td>
<td><code>read_tsv()</code></td>
<td><code>write_tsv()</code></td>
</tr>
<tr class="odd">
<td><code>.rda</code></td>
<td></td>
<td><code>load()</code></td>
<td><code>write()</code></td>
</tr>
<tr class="even">
<td><code>.rds</code></td>
<td><code>readr</code></td>
<td><code>read_rds()</code></td>
<td><code>write_rds()</code></td>
</tr>
</tbody>
</table>
<p>For the most of these formats, we will need to assign the content of the file into an object in the environment.</p>
<p><strong>Advice:</strong> use short but descriptive names for objects: e.g., <code>df</code> is short but not descriptive, but <code>PEI country-level data (PEI_9.0)</code> may be too long. <code>pei</code> will probably be the middle ground.</p>
<p><em>Tab</em> allows for autocomplete of the name of the object. Once you have typed <code>""</code> and placed the mouse between the quotation marks, click on <em>Tab</em> and you can select the files available in that directory.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pei <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/PEI country-level data (PEI_9.0).csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 169 Columns: 169
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr  (15): country, ISO, y2012, y2013, y2014, y2015, y2016, y2017, y2018, y2...
dbl (138): PR, CL, development, gdp_pc_ppp, region, oecd, PEIIndexp, PEIInde...
lgl  (16): COUNTRYDATA, OVERALLINTEGRITY, LAWS, PROCEDURES, BOUNDARIES, VOTE...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
</div>
</section>
<section id="exploring-the-dataset" class="level3">
<h3 class="anchored" data-anchor-id="exploring-the-dataset">Exploring the Dataset</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(pei)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 169
Columns: 169
$ country               &lt;chr&gt; "Afghanistan", "Angola", "Albania", "Argentina",…
$ ISO                   &lt;chr&gt; "AFG", "AGO", "ALB", "ARG", "ARM", "ATG", "AUS",…
$ y2012                 &lt;chr&gt; "Rest", "2012", "Rest", "Rest", "Rest", "Rest", …
$ y2013                 &lt;chr&gt; "Rest", "Rest", "2013", "2013", "2013", "Rest", …
$ y2014                 &lt;chr&gt; "2014", "Rest", "Rest", "Rest", "Rest", "Rest", …
$ y2015                 &lt;chr&gt; "Rest", "Rest", "Rest", "2015", "Rest", "Rest", …
$ y2016                 &lt;chr&gt; "Rest", "Rest", "Rest", "Rest", "Rest", "Rest", …
$ y2017                 &lt;chr&gt; "Rest", "2017", "2017", "2017", "2017", "Rest", …
$ y2018                 &lt;chr&gt; "2018", "Rest", "Rest", "Rest", "2018", "2018", …
$ y2019                 &lt;chr&gt; "2019", "Rest", "Rest", "2019", "Rest", "Rest", …
$ y2020                 &lt;chr&gt; "Rest", "Rest", "Rest", "Rest", "Rest", "Rest", …
$ y2021                 &lt;chr&gt; "Rest", "Rest", "2021", "2021", "2021", "Rest", …
$ y2022                 &lt;chr&gt; "Rest", "2022", "Rest", "Rest", "Rest", "Rest", …
$ COUNTRYDATA           &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ PR                    &lt;dbl&gt; 5, 6, 3, 2, 5, 2, 1, 1, 7, 7, 1, 3, 4, 4, 2, 7, …
$ CL                    &lt;dbl&gt; 6, 5, 3, 2, 4, 2, 1, 1, 6, 6, 1, 2, 3, 4, 2, 6, …
$ development           &lt;dbl&gt; 1, 2, 3, 3, 3, 4, 4, 4, 3, 1, 4, 2, 1, 2, 3, 4, …
$ gdp_pc_ppp            &lt;dbl&gt; 1944, 6140, 12678, 21212, 10051, 21491, 50122, 5…
$ region                &lt;dbl&gt; 3, 1, 4, 2, 4, 2, 5, 4, 4, 1, 4, 1, 1, 3, 4, 3, …
$ region9               &lt;chr&gt; "East Asia &amp; Oceania", "Eastern &amp; Southern Afric…
$ oecd                  &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 0, 0, 0, …
$ OVERALLINTEGRITY      &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ PEIIndexp             &lt;dbl&gt; NA, 33, 46, 64, 50, NA, 72, 74, 36, NA, 63, 58, …
$ PEIIndexi             &lt;dbl&gt; 35, 36, 50, 67, 58, 48, 70, 79, 36, 27, 73, 55, …
$ rating                &lt;dbl&gt; 3, 4, 6, 8, 6, 6, 9, 9, 2, 2, 9, 6, 7, 3, 7, 3, …
$ LAWS                  &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ lawsunfair            &lt;dbl&gt; 3, 4, 4, 2, 3, 4, 3, 2, 3, 3, 3, 3, 3, 3, 2, 4, …
$ lawsunfair2           &lt;dbl&gt; 3, 2, 2, 4, 3, 3, 3, 4, 3, 3, 3, 3, 3, 3, 4, 2, …
$ favoredincumbent      &lt;dbl&gt; 4, 4, 4, 2, 3, 4, 3, 2, 4, 4, 2, 3, 3, 4, 2, 4, …
$ favoredincumbent2     &lt;dbl&gt; 2, 2, 2, 4, 3, 3, 3, 4, 2, 2, 4, 3, 3, 2, 4, 2, …
$ citizens              &lt;dbl&gt; 3, 3, 3, 2, 2, 2, 2, 1, 3, 3, 2, 2, 2, 3, 2, 4, …
$ citizens2             &lt;dbl&gt; 3, 3, 3, 4, 4, 4, 4, 5, 3, 3, 4, 4, 4, 3, 4, 2, …
$ laws                  &lt;dbl&gt; 54, 35, 39, 77, 62, 50, 65, 85, 43, 43, 71, 60, …
$ lawsi                 &lt;dbl&gt; 42, 31, 32, 75, 60, 50, 63, 78, 36, 36, 67, 54, …
$ PROCEDURES            &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ managed               &lt;dbl&gt; 2, 2, 3, 4, 4, 4, 5, 4, 2, 2, 4, 3, 3, 3, 4, 3, …
$ votinginfo            &lt;dbl&gt; 3, 3, 4, 4, 4, 4, 4, 5, 3, 2, 4, 4, 4, 3, 4, 3, …
$ fairofficials         &lt;dbl&gt; 2, 2, 3, 4, 3, 4, 5, 5, 1, 2, 5, 4, 3, 3, 4, 2, …
$ legalelections        &lt;dbl&gt; 2, 2, 3, 4, 3, 4, 5, 5, 2, 2, 5, 4, 4, 3, 4, 3, …
$ procedures            &lt;dbl&gt; 32, 37, 61, 83, 66, 72, 91, 89, 38, 32, 89, 70, …
$ proceduresi           &lt;dbl&gt; 28, 33, 49, 81, 62, 72, 91, 88, 31, 23, 88, 67, …
$ BOUNDARIES            &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ bdiscrim              &lt;dbl&gt; 3, 3, 4, 2, 2, 4, 2, 1, 3, 4, 2, 2, 3, 3, 2, 5, …
$ bdiscrim2             &lt;dbl&gt; 3, 3, 2, 4, 4, 3, 4, 5, 3, 2, 4, 4, 3, 3, 4, 2, …
$ bfavored              &lt;dbl&gt; 3, 3, 3, 2, 3, 4, 2, 1, 3, 4, 2, 2, 3, 4, 2, 3, …
$ bfavored2             &lt;dbl&gt; 3, 3, 3, 4, 3, 3, 4, 5, 3, 2, 4, 4, 3, 2, 4, 3, …
$ bimpartial            &lt;dbl&gt; 3, 3, 3, 3, 3, 3, 4, 4, 3, 2, 3, 3, 2, 3, 3, 2, …
$ boundaries            &lt;dbl&gt; 46, 48, 41, 71, 63, 38, 74, 84, 60, 37, 66, 71, …
$ boundariesi           &lt;dbl&gt; 49, 52, 50, 66, 60, 38, 72, 72, 53, 35, 64, 65, …
$ VOTERREGISTRATION     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ reglisted             &lt;dbl&gt; 5, 4, 2, 2, 3, 4, 3, 2, 3, 4, 2, 4, 3, 3, 3, 4, …
$ reglisted2            &lt;dbl&gt; 1, 2, 4, 4, 3, 2, 3, 4, 3, 2, 4, 2, 3, 3, 3, 2, …
$ reginaccurate         &lt;dbl&gt; 4, 4, 2, 2, 3, 4, 2, 2, 4, 4, 2, 3, 3, 3, 4, 4, …
$ reginaccurate2        &lt;dbl&gt; 2, 2, 4, 4, 3, 2, 4, 4, 2, 2, 4, 3, 3, 3, 2, 2, …
$ ineligible            &lt;dbl&gt; 4, 4, 3, 2, 3, NA, 2, 2, 3, 4, 2, 2, 2, 3, 3, 4,…
$ ineligible2           &lt;dbl&gt; 2, 2, 3, 4, 3, NA, 4, 4, 3, 2, 4, 4, 4, 3, 3, 2,…
$ votereg               &lt;dbl&gt; 22, 29, 65, 74, 58, NA, 67, 86, 44, 37, 80, 52, …
$ voteregi              &lt;dbl&gt; 19, 26, 70, 69, 53, 53, 58, 85, 43, 26, 71, 41, …
$ PARTYREGISTRATION     &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ oppprevent            &lt;dbl&gt; 3, 3, 2, 1, 2, 2, 1, 1, 4, 4, 2, 3, 3, 3, 2, 4, …
$ oppprevent2           &lt;dbl&gt; 3, 3, 4, 5, 4, 4, 5, 5, 2, 2, 4, 3, 3, 3, 4, 2, …
$ womenopp              &lt;dbl&gt; 3, 3, 3, 4, 3, 3, 4, 4, 3, 3, 4, 4, 2, 3, 4, 3, …
$ minorityopp           &lt;dbl&gt; 3, 3, 4, 4, 3, 3, 3, 4, 3, 3, 4, 4, 4, 3, 4, 3, …
$ leaderselect          &lt;dbl&gt; 3, 4, 5, 3, 3, 5, 2, 3, 3, 4, 3, 4, 4, 4, 4, 4, …
$ leaderselect2         &lt;dbl&gt; 3, 2, 1, 3, 3, 1, 4, 3, 3, 2, 3, 2, 2, 2, 2, 2, …
$ rallies               &lt;dbl&gt; 3, 3, 3, 2, 2, 3, 2, 1, 4, 4, 2, 2, 2, 4, 2, 4, …
$ rallies2              &lt;dbl&gt; 3, 3, 3, 4, 4, 3, 4, 5, 2, 2, 4, 4, 4, 2, 4, 2, …
$ partyreg              &lt;dbl&gt; 56, 49, 53, 74, 63, 43, 74, 77, 46, 42, 75, 58, …
$ partyregi             &lt;dbl&gt; 50, 41, 53, 68, 62, 43, 75, 77, 39, 28, 71, 58, …
$ MEDIACOVERAGE         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ newspapers            &lt;dbl&gt; 3, 1, 2, 3, 3, 4, 2, 3, 2, 2, 4, 3, 4, 3, 2, 2, …
$ tv                    &lt;dbl&gt; 3, 4, 4, 3, 3, 5, 3, 2, 4, 4, 2, 3, 3, 3, 3, 4, …
$ tv2                   &lt;dbl&gt; 3, 2, 2, 3, 3, 1, 3, 4, 2, 2, 4, 3, 3, 3, 3, 2, …
$ fairaccess            &lt;dbl&gt; 3, 2, 3, 4, 3, 2, 3, 4, 2, 1, 3, 3, 3, 3, 3, 2, …
$ faircoverage          &lt;dbl&gt; 4, 2, 2, 3, 3, 3, 3, 4, 2, 2, 4, 3, 4, 3, 3, 2, …
$ socialmedia           &lt;dbl&gt; 5, 4, 4, 3, 4, 5, 3, 2, 4, 3, 2, 4, 4, 3, 3, 3, …
$ media                 &lt;dbl&gt; 71, 37, 44, 52, 61, 45, 45, 60, 35, 35, 57, 50, …
$ mediai                &lt;dbl&gt; 68, 32, 41, 51, 60, 44, 42, 60, 28, 29, 63, 52, …
$ CAMPAIGNFINANCE       &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ subsidies             &lt;dbl&gt; 2, 2, 3, 3, 3, 1, 3, 4, 2, 1, 3, 3, 2, 2, 3, 2, …
$ donations             &lt;dbl&gt; 2, 2, 3, 3, 3, 1, 3, 3, 2, 1, 4, 3, 2, 2, 3, 2, …
$ accounts              &lt;dbl&gt; 2, 2, 2, 2, 3, 1, 3, 3, 2, 2, 3, 2, 2, 2, 2, 2, …
$ rich                  &lt;dbl&gt; 4, 4, 4, 2, 3, 5, 3, 2, 4, 3, 2, 4, 4, 4, 3, 3, …
$ rich2                 &lt;dbl&gt; 2, 2, 2, 4, 3, 1, 3, 4, 2, 3, 4, 2, 2, 2, 3, 3, …
$ resources             &lt;dbl&gt; 4, 4, 4, 4, 4, 5, 3, 2, 4, 5, 2, 4, 4, 4, 4, 4, …
$ resources2            &lt;dbl&gt; 2, 2, 2, 2, 2, 2, 3, 4, 2, 1, 4, 2, 2, 2, 2, 2, …
$ finance               &lt;dbl&gt; 28, 31, 33, 46, 43, 0, 50, 67, 32, 29, 73, 34, 3…
$ financei              &lt;dbl&gt; 23, 28, 30, 42, 45, 4, 52, 65, 26, 13, 64, 31, 2…
$ VOTINGPROCESS         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ violence              &lt;dbl&gt; 5, 3, 3, 2, 3, 2, 1, 1, 3, 4, 2, 2, 2, 5, 2, 3, …
$ violence2             &lt;dbl&gt; 1, 3, 3, 4, 3, 5, 5, 5, 3, 2, 4, 4, 4, 1, 4, 3, …
$ fraudulent            &lt;dbl&gt; 5, 4, 4, 2, 3, 4, 2, 1, 4, 4, 1, 4, 4, 5, 4, 4, …
$ fraudulent2           &lt;dbl&gt; 1, 2, 2, 4, 3, 2, 4, 5, 2, 2, 5, 2, 2, 1, 2, 2, …
$ easy                  &lt;dbl&gt; 3, 3, 4, 4, 4, 4, 4, 5, 3, 3, 4, 4, 3, 3, 4, 3, …
$ choice                &lt;dbl&gt; 4, 4, 4, 4, 4, 4, 4, 5, 2, 2, 4, 4, 3, 2, 4, 2, …
$ postal                &lt;dbl&gt; 1, 2, 3, 2, 2, 1, 5, 5, 3, 2, 3, 3, 2, 3, 2, 3, …
$ disabled              &lt;dbl&gt; 2, 3, 3, 3, 3, 1, 4, 5, 3, 2, 4, 3, 3, 2, 4, 4, …
$ expats                &lt;dbl&gt; 1, 3, 2, 4, 2, 1, 4, 5, 4, 3, 4, 3, 2, 2, 4, 4, …
$ internet              &lt;dbl&gt; 1, 1, 2, 1, 2, 1, 2, 1, 1, 2, 2, 1, 1, 2, 1, 2, …
$ voting                &lt;dbl&gt; 25, 46, 47, 59, 45, 31, 77, 82, 44, 37, 73, 49, …
$ votingi               &lt;dbl&gt; 25, 42, 45, 63, 49, 39, 75, 83, 40, 26, 70, 46, …
$ VOTECOUNT             &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ secure                &lt;dbl&gt; 2, 2, 4, 4, 4, NA, 4, 5, 2, 2, 4, 4, 4, 3, 4, 4,…
$ delay                 &lt;dbl&gt; 1, 3, 3, 4, 4, 5, 4, 5, 4, 3, 4, 4, 4, 3, 4, 4, …
$ faircount             &lt;dbl&gt; 2, 2, 3, 4, 3, 4, 4, 5, 2, 2, 4, 4, 3, 2, 4, 3, …
$ intlmonitors          &lt;dbl&gt; 3, 4, 2, 2, 2, 2, 2, 1, 4, 4, 2, 1, 2, 3, 2, 4, …
$ intlmonitors2         &lt;dbl&gt; 3, 2, 4, 4, 4, 4, 4, 5, 2, 2, 4, 5, 4, 3, 4, 2, …
$ domesticmonitors      &lt;dbl&gt; 3, 4, 2, 2, 2, 2, 2, 1, 4, 4, 2, 1, 2, 3, 2, 4, …
$ domesticmonitors2     &lt;dbl&gt; 3, 2, 4, 4, 4, 4, 4, 5, 2, 2, 4, 5, 4, 3, 4, 2, …
$ count                 &lt;dbl&gt; 30, 41, 68, 80, 72, NA, 86, 93, 45, 33, 84, 84, …
$ counti                &lt;dbl&gt; 26, 36, 64, 78, 71, 79, 77, 93, 38, 38, 81, 74, …
$ VOTINGRESULTS         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ challenged            &lt;dbl&gt; 5, 4, 3, 2, 3, 3, 3, 2, 3, 5, 2, 3, 3, 4, 2, 3, …
$ challenged2           &lt;dbl&gt; 1, 2, 3, 4, 3, 4, 3, 4, 3, 1, 4, 3, 3, 2, 4, 3, …
$ protestspeace         &lt;dbl&gt; 4, 4, 2, 2, 3, 2, 2, 2, 2, 3, 2, 3, 3, 3, 2, 3, …
$ protestspeace2        &lt;dbl&gt; 2, 2, 4, 4, 3, 5, 4, 4, 4, 3, 4, 3, 3, 3, 4, 3, …
$ protestsviolent       &lt;dbl&gt; 3, 2, 2, 1, 2, 2, 1, 1, 2, 4, 1, 2, 2, 3, 1, 3, …
$ protestsviolent2      &lt;dbl&gt; 3, 4, 4, 5, 4, 5, 5, 5, 4, 2, 5, 4, 4, 3, 5, 3, …
$ disputes              &lt;dbl&gt; 2, 3, 3, 4, 3, 4, 4, 4, 2, 2, 4, 3, 4, 2, 4, 3, …
$ results               &lt;dbl&gt; 31, 43, 67, 81, 62, 63, 78, 77, 59, 40, 80, 59, …
$ resultsi              &lt;dbl&gt; 27, 41, 67, 83, 59, 79, 78, 80, 49, 27, 81, 60, …
$ ELECTIONAUTHORITIES   &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ impartial             &lt;dbl&gt; 2, 2, 3, 4, 3, 2, 4, 5, 2, 2, 4, 4, 4, 2, 4, 2, …
$ info                  &lt;dbl&gt; 3, 3, 4, 4, 4, 4, 4, 4, 3, 3, 4, 4, 4, 3, 4, 3, …
$ scrutiny              &lt;dbl&gt; 2, 2, 3, 4, 3, 2, 4, 4, 2, 2, 4, 3, 3, 2, 3, 2, …
$ performance           &lt;dbl&gt; 2, 2, 3, 4, 3, 3, 4, 4, 2, 2, 4, 4, 4, 2, 4, 3, …
$ EMBs                  &lt;dbl&gt; 33, 44, 58, 74, 63, 41, 84, 87, 29, 34, 82, 66, …
$ EMBsi                 &lt;dbl&gt; 26, 32, 55, 71, 60, 41, 84, 86, 21, 23, 85, 67, …
$ GENERALQUESTIONS      &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ important             &lt;dbl&gt; 2, 2, 3, 2, 2, 2, 2, 2, 1, 1, 2, 1, 1, 3, 3, 2, …
$ ORGCONFIDENCE         &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ courts                &lt;dbl&gt; 3, 3, 3, 5, 4, 7, 8, 9, 2, 3, 8, 6, 5, 4, 4, 4, …
$ government            &lt;dbl&gt; 3, 3, 4, 5, 5, 3, 7, 7, 2, 2, 7, 5, 4, 3, 5, 3, …
$ parliament            &lt;dbl&gt; 3, 3, 4, 5, 5, 3, 7, 8, 2, 3, 7, 5, 4, 3, 5, 3, …
$ armedforces           &lt;dbl&gt; 5, 4, 5, 4, 6, 3, 7, 7, 4, 5, 7, 7, 4, 5, 5, 4, …
$ electoralauth         &lt;dbl&gt; 3, 3, 5, 7, 5, 4, 9, 9, 2, 3, 9, 7, 6, 3, 6, 3, …
$ ROTATING              &lt;lgl&gt; NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, …
$ bribed                &lt;dbl&gt; 4, 4, 4, 2, 3, 5, 2, 1, 3, 4, 1, 4, 5, NA, 4, 4,…
$ bribed2               &lt;dbl&gt; 2, 2, 2, 4, 3, 1, 4, 5, 3, 2, 5, 2, 2, NA, 2, 3,…
$ freetovote            &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 4, 4, NA, NA, NA, 4, NA,…
$ fearviolence          &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 1, 2, NA, NA, NA, 2, NA,…
$ fearviolence2         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 5, 4, NA, NA, NA, 4, NA,…
$ ballotconfidential    &lt;dbl&gt; NA, 3, 4, 4, 3, NA, 5, 5, NA, NA, NA, 5, NA, NA,…
$ freefairelect         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 5, 5, NA, NA, NA, 4, NA,…
$ cashforvotes          &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 1, 1, NA, NA, NA, 4, NA,…
$ cashforvotes2         &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 5, 5, NA, NA, NA, 2, NA,…
$ patronage             &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 2, 2, NA, NA, NA, 4, NA,…
$ patronage2            &lt;dbl&gt; NA, NA, NA, NA, NA, NA, 4, 4, NA, NA, NA, 2, NA,…
$ audit                 &lt;dbl&gt; NA, 2, 3, 3, 3, NA, NA, 2, NA, NA, NA, NA, NA, N…
$ hacking               &lt;dbl&gt; NA, 2, 4, 4, 3, NA, NA, 4, NA, NA, NA, NA, NA, N…
$ campaignnews          &lt;dbl&gt; NA, 3, 3, 3, 3, NA, NA, 4, NA, NA, NA, NA, NA, N…
$ govtnews              &lt;dbl&gt; NA, 2, 3, 3, 2, NA, NA, 4, NA, NA, NA, NA, NA, N…
$ fakenews              &lt;dbl&gt; 2, 3, 3, 3, 3, 2, 3, 2, 2, NA, 2, 3, NA, NA, 3, …
$ fakenews2             &lt;dbl&gt; 4, 3, 3, 3, 3, 4, 3, 4, 4, NA, 4, 3, NA, NA, 3, …
$ hatespeech            &lt;dbl&gt; 3, NA, NA, 3, 3, 2, 3, 3, 3, NA, 3, 3, NA, NA, N…
$ hatespeech2           &lt;dbl&gt; 3, NA, NA, 3, 3, 4, 3, 4, 3, NA, 3, 3, NA, NA, N…
$ informedchoices       &lt;dbl&gt; 4, NA, NA, 4, 4, 1, 2, 4, 2, NA, 4, 3, NA, NA, N…
$ foreigninterference   &lt;dbl&gt; 4, NA, NA, 3, 2, 4, 3, 1, 2, NA, 2, 1, NA, NA, N…
$ foreigninterference2  &lt;dbl&gt; 2, NA, NA, 3, 4, 2, 3, 5, 4, NA, 4, 5, NA, NA, N…
$ mediamonitors         &lt;dbl&gt; 4, NA, NA, 3, 3, 3, 4, 5, 3, NA, 3, 3, NA, NA, N…
$ cyberattacks          &lt;dbl&gt; 2, NA, NA, 2, 2, 2, 2, 1, 1, NA, 1, 2, NA, NA, N…
$ cyberattacks2         &lt;dbl&gt; 4, NA, NA, 4, 4, 4, 4, 5, 5, NA, 5, 5, NA, NA, N…
$ diversenews           &lt;dbl&gt; 4, NA, NA, 4, 3, 2, 3, 4, 2, NA, 4, 2, NA, NA, N…
$ journalisticstandards &lt;dbl&gt; 4, NA, NA, 3, 3, 3, 3, 4, 2, NA, 3, 2, NA, NA, N…
$ partisanjournalists   &lt;dbl&gt; 3, NA, NA, 4, 3, 4, 4, 3, 4, NA, 3, 3, NA, NA, N…
$ partisanjournalists2  &lt;dbl&gt; 3, NA, NA, 2, 3, 2, 2, 3, 3, NA, 4, 3, NA, NA, N…
$ fakesocial            &lt;dbl&gt; 4, NA, NA, 4, 3, 3, 4, 3, 4, NA, 3, 4, NA, NA, N…
$ fakesocial2           &lt;dbl&gt; 2, NA, NA, 2, 3, 4, 2, 4, 3, NA, 3, 2, NA, NA, N…
$ PEItype               &lt;chr&gt; "Very Low", "Very Low", "Low", "High", "Moderate…</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(pei)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>spc_tbl_ [169 × 169] (S3: spec_tbl_df/tbl_df/tbl/data.frame)
 $ country              : chr [1:169] "Afghanistan" "Angola" "Albania" "Argentina" ...
 $ ISO                  : chr [1:169] "AFG" "AGO" "ALB" "ARG" ...
 $ y2012                : chr [1:169] "Rest" "2012" "Rest" "Rest" ...
 $ y2013                : chr [1:169] "Rest" "Rest" "2013" "2013" ...
 $ y2014                : chr [1:169] "2014" "Rest" "Rest" "Rest" ...
 $ y2015                : chr [1:169] "Rest" "Rest" "Rest" "2015" ...
 $ y2016                : chr [1:169] "Rest" "Rest" "Rest" "Rest" ...
 $ y2017                : chr [1:169] "Rest" "2017" "2017" "2017" ...
 $ y2018                : chr [1:169] "2018" "Rest" "Rest" "Rest" ...
 $ y2019                : chr [1:169] "2019" "Rest" "Rest" "2019" ...
 $ y2020                : chr [1:169] "Rest" "Rest" "Rest" "Rest" ...
 $ y2021                : chr [1:169] "Rest" "Rest" "2021" "2021" ...
 $ y2022                : chr [1:169] "Rest" "2022" "Rest" "Rest" ...
 $ COUNTRYDATA          : logi [1:169] NA NA NA NA NA NA ...
 $ PR                   : num [1:169] 5 6 3 2 5 2 1 1 7 7 ...
 $ CL                   : num [1:169] 6 5 3 2 4 2 1 1 6 6 ...
 $ development          : num [1:169] 1 2 3 3 3 4 4 4 3 1 ...
 $ gdp_pc_ppp           : num [1:169] 1944 6140 12678 21212 10051 ...
 $ region               : num [1:169] 3 1 4 2 4 2 5 4 4 1 ...
 $ region9              : chr [1:169] "East Asia &amp; Oceania" "Eastern &amp; Southern Africa" "Eastern Europe &amp; Central Asia" "Americas" ...
 $ oecd                 : num [1:169] 0 0 0 0 0 0 1 1 0 0 ...
 $ OVERALLINTEGRITY     : logi [1:169] NA NA NA NA NA NA ...
 $ PEIIndexp            : num [1:169] NA 33 46 64 50 NA 72 74 36 NA ...
 $ PEIIndexi            : num [1:169] 35 36 50 67 58 48 70 79 36 27 ...
 $ rating               : num [1:169] 3 4 6 8 6 6 9 9 2 2 ...
 $ LAWS                 : logi [1:169] NA NA NA NA NA NA ...
 $ lawsunfair           : num [1:169] 3 4 4 2 3 4 3 2 3 3 ...
 $ lawsunfair2          : num [1:169] 3 2 2 4 3 3 3 4 3 3 ...
 $ favoredincumbent     : num [1:169] 4 4 4 2 3 4 3 2 4 4 ...
 $ favoredincumbent2    : num [1:169] 2 2 2 4 3 3 3 4 2 2 ...
 $ citizens             : num [1:169] 3 3 3 2 2 2 2 1 3 3 ...
 $ citizens2            : num [1:169] 3 3 3 4 4 4 4 5 3 3 ...
 $ laws                 : num [1:169] 54 35 39 77 62 50 65 85 43 43 ...
 $ lawsi                : num [1:169] 42 31 32 75 60 50 63 78 36 36 ...
 $ PROCEDURES           : logi [1:169] NA NA NA NA NA NA ...
 $ managed              : num [1:169] 2 2 3 4 4 4 5 4 2 2 ...
 $ votinginfo           : num [1:169] 3 3 4 4 4 4 4 5 3 2 ...
 $ fairofficials        : num [1:169] 2 2 3 4 3 4 5 5 1 2 ...
 $ legalelections       : num [1:169] 2 2 3 4 3 4 5 5 2 2 ...
 $ procedures           : num [1:169] 32 37 61 83 66 72 91 89 38 32 ...
 $ proceduresi          : num [1:169] 28 33 49 81 62 72 91 88 31 23 ...
 $ BOUNDARIES           : logi [1:169] NA NA NA NA NA NA ...
 $ bdiscrim             : num [1:169] 3 3 4 2 2 4 2 1 3 4 ...
 $ bdiscrim2            : num [1:169] 3 3 2 4 4 3 4 5 3 2 ...
 $ bfavored             : num [1:169] 3 3 3 2 3 4 2 1 3 4 ...
 $ bfavored2            : num [1:169] 3 3 3 4 3 3 4 5 3 2 ...
 $ bimpartial           : num [1:169] 3 3 3 3 3 3 4 4 3 2 ...
 $ boundaries           : num [1:169] 46 48 41 71 63 38 74 84 60 37 ...
 $ boundariesi          : num [1:169] 49 52 50 66 60 38 72 72 53 35 ...
 $ VOTERREGISTRATION    : logi [1:169] NA NA NA NA NA NA ...
 $ reglisted            : num [1:169] 5 4 2 2 3 4 3 2 3 4 ...
 $ reglisted2           : num [1:169] 1 2 4 4 3 2 3 4 3 2 ...
 $ reginaccurate        : num [1:169] 4 4 2 2 3 4 2 2 4 4 ...
 $ reginaccurate2       : num [1:169] 2 2 4 4 3 2 4 4 2 2 ...
 $ ineligible           : num [1:169] 4 4 3 2 3 NA 2 2 3 4 ...
 $ ineligible2          : num [1:169] 2 2 3 4 3 NA 4 4 3 2 ...
 $ votereg              : num [1:169] 22 29 65 74 58 NA 67 86 44 37 ...
 $ voteregi             : num [1:169] 19 26 70 69 53 53 58 85 43 26 ...
 $ PARTYREGISTRATION    : logi [1:169] NA NA NA NA NA NA ...
 $ oppprevent           : num [1:169] 3 3 2 1 2 2 1 1 4 4 ...
 $ oppprevent2          : num [1:169] 3 3 4 5 4 4 5 5 2 2 ...
 $ womenopp             : num [1:169] 3 3 3 4 3 3 4 4 3 3 ...
 $ minorityopp          : num [1:169] 3 3 4 4 3 3 3 4 3 3 ...
 $ leaderselect         : num [1:169] 3 4 5 3 3 5 2 3 3 4 ...
 $ leaderselect2        : num [1:169] 3 2 1 3 3 1 4 3 3 2 ...
 $ rallies              : num [1:169] 3 3 3 2 2 3 2 1 4 4 ...
 $ rallies2             : num [1:169] 3 3 3 4 4 3 4 5 2 2 ...
 $ partyreg             : num [1:169] 56 49 53 74 63 43 74 77 46 42 ...
 $ partyregi            : num [1:169] 50 41 53 68 62 43 75 77 39 28 ...
 $ MEDIACOVERAGE        : logi [1:169] NA NA NA NA NA NA ...
 $ newspapers           : num [1:169] 3 1 2 3 3 4 2 3 2 2 ...
 $ tv                   : num [1:169] 3 4 4 3 3 5 3 2 4 4 ...
 $ tv2                  : num [1:169] 3 2 2 3 3 1 3 4 2 2 ...
 $ fairaccess           : num [1:169] 3 2 3 4 3 2 3 4 2 1 ...
 $ faircoverage         : num [1:169] 4 2 2 3 3 3 3 4 2 2 ...
 $ socialmedia          : num [1:169] 5 4 4 3 4 5 3 2 4 3 ...
 $ media                : num [1:169] 71 37 44 52 61 45 45 60 35 35 ...
 $ mediai               : num [1:169] 68 32 41 51 60 44 42 60 28 29 ...
 $ CAMPAIGNFINANCE      : logi [1:169] NA NA NA NA NA NA ...
 $ subsidies            : num [1:169] 2 2 3 3 3 1 3 4 2 1 ...
 $ donations            : num [1:169] 2 2 3 3 3 1 3 3 2 1 ...
 $ accounts             : num [1:169] 2 2 2 2 3 1 3 3 2 2 ...
 $ rich                 : num [1:169] 4 4 4 2 3 5 3 2 4 3 ...
 $ rich2                : num [1:169] 2 2 2 4 3 1 3 4 2 3 ...
 $ resources            : num [1:169] 4 4 4 4 4 5 3 2 4 5 ...
 $ resources2           : num [1:169] 2 2 2 2 2 2 3 4 2 1 ...
 $ finance              : num [1:169] 28 31 33 46 43 0 50 67 32 29 ...
 $ financei             : num [1:169] 23 28 30 42 45 4 52 65 26 13 ...
 $ VOTINGPROCESS        : logi [1:169] NA NA NA NA NA NA ...
 $ violence             : num [1:169] 5 3 3 2 3 2 1 1 3 4 ...
 $ violence2            : num [1:169] 1 3 3 4 3 5 5 5 3 2 ...
 $ fraudulent           : num [1:169] 5 4 4 2 3 4 2 1 4 4 ...
 $ fraudulent2          : num [1:169] 1 2 2 4 3 2 4 5 2 2 ...
 $ easy                 : num [1:169] 3 3 4 4 4 4 4 5 3 3 ...
 $ choice               : num [1:169] 4 4 4 4 4 4 4 5 2 2 ...
 $ postal               : num [1:169] 1 2 3 2 2 1 5 5 3 2 ...
 $ disabled             : num [1:169] 2 3 3 3 3 1 4 5 3 2 ...
 $ expats               : num [1:169] 1 3 2 4 2 1 4 5 4 3 ...
 $ internet             : num [1:169] 1 1 2 1 2 1 2 1 1 2 ...
  [list output truncated]
 - attr(*, "spec")=
  .. cols(
  ..   country = col_character(),
  ..   ISO = col_character(),
  ..   y2012 = col_character(),
  ..   y2013 = col_character(),
  ..   y2014 = col_character(),
  ..   y2015 = col_character(),
  ..   y2016 = col_character(),
  ..   y2017 = col_character(),
  ..   y2018 = col_character(),
  ..   y2019 = col_character(),
  ..   y2020 = col_character(),
  ..   y2021 = col_character(),
  ..   y2022 = col_character(),
  ..   COUNTRYDATA = col_logical(),
  ..   PR = col_double(),
  ..   CL = col_double(),
  ..   development = col_double(),
  ..   gdp_pc_ppp = col_double(),
  ..   region = col_double(),
  ..   region9 = col_character(),
  ..   oecd = col_double(),
  ..   OVERALLINTEGRITY = col_logical(),
  ..   PEIIndexp = col_double(),
  ..   PEIIndexi = col_double(),
  ..   rating = col_double(),
  ..   LAWS = col_logical(),
  ..   lawsunfair = col_double(),
  ..   lawsunfair2 = col_double(),
  ..   favoredincumbent = col_double(),
  ..   favoredincumbent2 = col_double(),
  ..   citizens = col_double(),
  ..   citizens2 = col_double(),
  ..   laws = col_double(),
  ..   lawsi = col_double(),
  ..   PROCEDURES = col_logical(),
  ..   managed = col_double(),
  ..   votinginfo = col_double(),
  ..   fairofficials = col_double(),
  ..   legalelections = col_double(),
  ..   procedures = col_double(),
  ..   proceduresi = col_double(),
  ..   BOUNDARIES = col_logical(),
  ..   bdiscrim = col_double(),
  ..   bdiscrim2 = col_double(),
  ..   bfavored = col_double(),
  ..   bfavored2 = col_double(),
  ..   bimpartial = col_double(),
  ..   boundaries = col_double(),
  ..   boundariesi = col_double(),
  ..   VOTERREGISTRATION = col_logical(),
  ..   reglisted = col_double(),
  ..   reglisted2 = col_double(),
  ..   reginaccurate = col_double(),
  ..   reginaccurate2 = col_double(),
  ..   ineligible = col_double(),
  ..   ineligible2 = col_double(),
  ..   votereg = col_double(),
  ..   voteregi = col_double(),
  ..   PARTYREGISTRATION = col_logical(),
  ..   oppprevent = col_double(),
  ..   oppprevent2 = col_double(),
  ..   womenopp = col_double(),
  ..   minorityopp = col_double(),
  ..   leaderselect = col_double(),
  ..   leaderselect2 = col_double(),
  ..   rallies = col_double(),
  ..   rallies2 = col_double(),
  ..   partyreg = col_double(),
  ..   partyregi = col_double(),
  ..   MEDIACOVERAGE = col_logical(),
  ..   newspapers = col_double(),
  ..   tv = col_double(),
  ..   tv2 = col_double(),
  ..   fairaccess = col_double(),
  ..   faircoverage = col_double(),
  ..   socialmedia = col_double(),
  ..   media = col_double(),
  ..   mediai = col_double(),
  ..   CAMPAIGNFINANCE = col_logical(),
  ..   subsidies = col_double(),
  ..   donations = col_double(),
  ..   accounts = col_double(),
  ..   rich = col_double(),
  ..   rich2 = col_double(),
  ..   resources = col_double(),
  ..   resources2 = col_double(),
  ..   finance = col_double(),
  ..   financei = col_double(),
  ..   VOTINGPROCESS = col_logical(),
  ..   violence = col_double(),
  ..   violence2 = col_double(),
  ..   fraudulent = col_double(),
  ..   fraudulent2 = col_double(),
  ..   easy = col_double(),
  ..   choice = col_double(),
  ..   postal = col_double(),
  ..   disabled = col_double(),
  ..   expats = col_double(),
  ..   internet = col_double(),
  ..   voting = col_double(),
  ..   votingi = col_double(),
  ..   VOTECOUNT = col_logical(),
  ..   secure = col_double(),
  ..   delay = col_double(),
  ..   faircount = col_double(),
  ..   intlmonitors = col_double(),
  ..   intlmonitors2 = col_double(),
  ..   domesticmonitors = col_double(),
  ..   domesticmonitors2 = col_double(),
  ..   count = col_double(),
  ..   counti = col_double(),
  ..   VOTINGRESULTS = col_logical(),
  ..   challenged = col_double(),
  ..   challenged2 = col_double(),
  ..   protestspeace = col_double(),
  ..   protestspeace2 = col_double(),
  ..   protestsviolent = col_double(),
  ..   protestsviolent2 = col_double(),
  ..   disputes = col_double(),
  ..   results = col_double(),
  ..   resultsi = col_double(),
  ..   ELECTIONAUTHORITIES = col_logical(),
  ..   impartial = col_double(),
  ..   info = col_double(),
  ..   scrutiny = col_double(),
  ..   performance = col_double(),
  ..   EMBs = col_double(),
  ..   EMBsi = col_double(),
  ..   GENERALQUESTIONS = col_logical(),
  ..   important = col_double(),
  ..   ORGCONFIDENCE = col_logical(),
  ..   courts = col_double(),
  ..   government = col_double(),
  ..   parliament = col_double(),
  ..   armedforces = col_double(),
  ..   electoralauth = col_double(),
  ..   ROTATING = col_logical(),
  ..   bribed = col_double(),
  ..   bribed2 = col_double(),
  ..   freetovote = col_double(),
  ..   fearviolence = col_double(),
  ..   fearviolence2 = col_double(),
  ..   ballotconfidential = col_double(),
  ..   freefairelect = col_double(),
  ..   cashforvotes = col_double(),
  ..   cashforvotes2 = col_double(),
  ..   patronage = col_double(),
  ..   patronage2 = col_double(),
  ..   audit = col_double(),
  ..   hacking = col_double(),
  ..   campaignnews = col_double(),
  ..   govtnews = col_double(),
  ..   fakenews = col_double(),
  ..   fakenews2 = col_double(),
  ..   hatespeech = col_double(),
  ..   hatespeech2 = col_double(),
  ..   informedchoices = col_double(),
  ..   foreigninterference = col_double(),
  ..   foreigninterference2 = col_double(),
  ..   mediamonitors = col_double(),
  ..   cyberattacks = col_double(),
  ..   cyberattacks2 = col_double(),
  ..   diversenews = col_double(),
  ..   journalisticstandards = col_double(),
  ..   partisanjournalists = col_double(),
  ..   partisanjournalists2 = col_double(),
  ..   fakesocial = col_double(),
  ..   fakesocial2 = col_double(),
  ..   PEItype = col_character()
  .. )
 - attr(*, "problems")=&lt;externalptr&gt; </code></pre>
</div>
</div>
</section>
</section>
<section id="descriptive-statistics" class="level2">
<h2 class="anchored" data-anchor-id="descriptive-statistics">Descriptive Statistics</h2>
<section id="range-and-percentiles" class="level3">
<h3 class="anchored" data-anchor-id="range-and-percentiles">Range and Percentiles</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">summary</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA's 
  16.00   42.00   55.00   54.32   65.25   90.00      21 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">IQR</span>(<span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 23.25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(pei<span class="sc">$</span>PEIIndexp) <span class="co"># returns NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(pei<span class="sc">$</span>PEIIndexp) <span class="co"># returns NA</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>The <code>quantile()</code> function will be very handy later: it returns the values at particular percentiles of the distribution. To remind you, the 5th percentile distribution is the point below which 5% of the data falls. The 95th percentile is, similarly, the point below which 95% of the data falls. The 50th percentile, the median, splits the data into two separate, and equal, parts. The minimum is at the 0th percentile. The maximum is at the 100th percentile. In <code>quantile()</code>, the <code>probs</code> argument allows us to specify the percentile(s) we want. Two of the most important percentiles are the 2.5th and 97.5th because they define the 95% interval, a central range which includes 95% of the values. Let’s look at them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(pei<span class="sc">$</span>PEIIndexp, <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16 90</code></pre>
</div>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(pei<span class="sc">$</span>PEIIndexp, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">0.8</span>), <span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> 10%  50%  80% 
33.7 55.0 69.6 </code></pre>
</div>
</div>
</section>
<section id="measures-of-central-tendency" class="level3">
<h3 class="anchored" data-anchor-id="measures-of-central-tendency">Measures of Central Tendency</h3>
<p>Statistics is pretty much about typical, i.e.&nbsp;<em>central</em>, behavior, i.e.&nbsp;<em>tendency</em> of the objects. Hence understanding the ways to calculate these averages underlies the idea of stats.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">mean</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">mean</span>(<span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 54.31757</code></pre>
</div>
</div>
<p>If the data are ordered from smallest to largest, the median is the observation right in the middle. If there are an even number of observations, there will be two values in the middle, and the median is taken as their average.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">median</span>(<span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 55</code></pre>
</div>
</div>
</section>
<section id="variance-and-standard-deviation" class="level3">
<h3 class="anchored" data-anchor-id="variance-and-standard-deviation">Variance and Standard Deviation</h3>
<p>The <em>variance</em> is the average squared distance from the mean. The <em>standard deviation</em> is the square root of the variance. The standard deviation is useful when considering how far the data are distributed from the mean.</p>
<p>The standard deviation represents the typical deviation of observations from the mean. Usually about 70% of the data will be within one standard deviation of the mean and about 95% will be within two standard deviations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">var</span>(<span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 286.7352</code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">sd</span>(<span class="at">na.rm =</span> T)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16.93326</code></pre>
</div>
</div>
<p><strong>Practice: Writing Up Our Own Variance and SD calculations</strong></p>
<p><span class="math display">\[
s^2 = \frac{\sum_{i=1}^{N}(x_i - \bar{x})^2} {N - 1}
\]</span></p>
</section>
</section>
<section id="visualization-with-ggplot2" class="level2">
<h2 class="anchored" data-anchor-id="visualization-with-ggplot2">Visualization with <code>ggplot2</code></h2>
<section id="grammar-of-graphics" class="level3">
<h3 class="anchored" data-anchor-id="grammar-of-graphics">Grammar of Graphics</h3>
<p>Recall that we have multiple layers in the plots:</p>
<ul>
<li><em>data</em>: the dataset containing the variables of interest.</li>
<li><em>aes</em>: aesthetic attributes of the geometric object. The most important are the names of the variables that should be on the x- and y-axes. Aesthetic attributes are mapped to variables in the dataset.</li>
<li><em>geom</em>: the geometric object to display, e.g., scatterplot, line, bar.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> [dataset],</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> [x <span class="sc">-</span> variable],</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> [y <span class="sc">-</span> variable]</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_xxx</span>() <span class="sc">+</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>  other options</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="distributions-of-continuous-variables" class="level3">
<h3 class="anchored" data-anchor-id="distributions-of-continuous-variables">Distributions of Continuous Variables</h3>
<section id="histograms" class="level4">
<h4 class="anchored" data-anchor-id="histograms">Histograms</h4>
<p>Let’s start with a <em>histogram</em>, a plot that visualizes the distribution of a <em>continuous</em> numerical variable.</p>
<p>We first cut up the x-axis into a series of bins, where each bin represents a range of values. For each bin, we count the number of observations that fall in the range corresponding to that bin. We draw a bar whose height indicates the corresponding count.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/ggplot-layers-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/ggplot-layers-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> pei,</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/ggplot-layers-3.png" class="img-fluid" width="672"></p>
</div>
</div>
<blockquote class="blockquote">
<p>❓ Why is the vertical axis still empty?</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> pei,</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_bin()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/ggplot-default-histogram-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Note the message printed above:</p>
<p>&nbsp;<code>stat_bin()</code> using <code>bins = 30</code>. Pick better value with <code>binwidth</code>.</p>
<p>The message is telling us that the histogram was constructed using <code>bins = 30</code> for 30 equally spaced bins. This is the default value. Unless you override this default number of bins with a number you specify, <code>R</code> will choose 30 by default. Because this is an important aspect of making a histogram, <code>R</code> insists on informing you with this message. You make this message go away by specifying the bin number yourself, as you should <em>always</em> do.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> pei,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">bins =</span> <span class="dv">50</span>, <span class="co"># number of bins</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">boundary =</span> <span class="dv">40</span> <span class="co"># there is a cutoff at 40 (for interpretation)</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_bin()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/ggplot-better-histogram-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Now let’s also work on presentation and the graphic design part and make it <em>more aesthetically appealing</em> and <em>more reader-friendly</em>.</p>
<blockquote class="blockquote">
<p>❓ What could we do to make the plot more informative?</p>
</blockquote>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> pei,</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)</span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">binwidth =</span> <span class="dv">2</span>, <span class="co"># each bin represents 2 points in PEI score</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">boundary =</span> <span class="dv">40</span>, <span class="co"># there is a cutoff at 40, a round number </span></span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"blue4"</span>,</span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"white"</span> <span class="co"># changes color for borders</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">100</span>) <span class="sc">+</span> <span class="co"># set the X axis to show all plausible values </span></span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of the PEI Index of Electoral Integrity"</span>,</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Worldwide in 2022"</span>,</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data source: PEI (2023)"</span>,</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Index of Electoral Integrity"</span>,</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Count"</span></span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="co"># removes grey background for cleaner look</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_bin()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p><strong>Interpretation</strong> Histograms provide a view of the data density. Higher bars represent where the data are relatively more common. Histograms are especially convenient for understanding the shape of the data distribution. When data trail off to the right and has a longer right tail, the shape is said to be <strong>right skewed</strong>. Data sets with the reverse characteristic – a long, thinner tail to the left – are said to be <strong>left skewed</strong>. We also say that such a distribution has a long left tail. Data sets that show roughly equal trailing off in both directions are called <strong>symmetric</strong>.</p>
</section>
<section id="density-plots" class="level4">
<h4 class="anchored" data-anchor-id="density-plots">Density Plots</h4>
<p>Let’s try out a different <code>geom</code> for numeric data: density plots. Unlike a histogram, density plot shows us the distribution as a single line and not as bins. Both of these visualizations work well for continuous variables. Here we can also see that <code>ggplot2</code> objects (i.e.&nbsp;the output of <code>ggplot()</code> function) can be stored in the environment and layers can be added at different stages.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>pei_density <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>                      <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>()</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>pei_density</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_density()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/ggplot-density-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>An important argument in this geom is <code>adjust =</code>. Let’s see how different values of this argument impact the curve:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>pei_density <span class="sc">+</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">adjust =</span> <span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">adjust =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">"blue"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_density()`).
Removed 21 rows containing non-finite values (`stat_density()`).
Removed 21 rows containing non-finite values (`stat_density()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">color =</span> region))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_density()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The following aesthetics were dropped during statistical transformation: colour
ℹ This can happen when ggplot fails to infer the correct grouping structure in
  the data.
ℹ Did you forget to specify a `group` aesthetic or to convert a numerical
  variable into a factor?</code></pre>
</div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-15-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">color =</span> region, <span class="at">fill =</span> region), <span class="at">alpha =</span> <span class="fl">0.3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_density()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: The following aesthetics were dropped during statistical transformation:
colour, fill
ℹ This can happen when ggplot fails to infer the correct grouping structure in
  the data.
ℹ Did you forget to specify a `group` aesthetic or to convert a numerical
  variable into a factor?</code></pre>
</div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-15-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>It is also often a good idea to add the actual observations when we are using density plots:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"gray"</span>) <span class="sc">+</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rug</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_density()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="boxplots-and-violin-plots" class="level4">
<h4 class="anchored" data-anchor-id="boxplots-and-violin-plots">Boxplots and Violin Plots</h4>
<div>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>  <span class="co"># theme(axis.ticks.y = element_blank(),</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="co">#       axis.text.y = element_blank())</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb54-6"><a href="#cb54-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_ydensity()`).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">width =</span> <span class="fl">0.5</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_ydensity()`).
Removed 21 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="cell quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-17-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-17-3.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">width =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_ydensity()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing missing values (`geom_point()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="distributions-of-discrete-numeric-and-categorial-variables" class="level3">
<h3 class="anchored" data-anchor-id="distributions-of-discrete-numeric-and-categorial-variables">Distributions of Discrete (Numeric) and Categorial Variables</h3>
<section id="barplot" class="level4">
<h4 class="anchored" data-anchor-id="barplot">Barplot</h4>
<p><code>geom_bar()</code> visualizes the distribution of a categorical or discrete variable. This is a simpler task than creating a histogram, as we are simply counting different categories within a categorical variable, also known as the levels of the categorical variable. Often the best way to visualize these different counts, also known as frequencies, is with a barplot.</p>
<p>Let’s recode the variable <code>region</code> to be more readable and visualize the counts:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a>pei <span class="ot">&lt;-</span> pei <span class="sc">%&gt;%</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> <span class="fu">case_when</span>(</span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Africa"</span>,</span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Americas"</span>,</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Asia"</span>,</span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"Europe"</span>,</span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"Oceania"</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(pei, region)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 2
  region       n
  &lt;chr&gt;    &lt;int&gt;
1 Africa      48
2 Americas    30
3 Asia        32
4 Europe      49
5 Oceania     10</code></pre>
</div>
</div>
<p>In bar plots of categorical variables with non-ordered levels, like the penguin species above, it’s often preferable to reorder the bars based on their frequencies. Doing so requires transforming the variable to a factor (how <code>R</code> handles categorical data) and then reordering the levels of that factor. Below you can find both versons of bar plots:</p>
<div>
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> region)) <span class="sc">+</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() </span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(region))) <span class="sc">+</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-20-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<p>Similar to categorical variables, we plot discrete numeric variables with this geom. According to the codebook, <code>rating</code> variable is the rating of electoral integrity (1=very poor, 10=very good).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co"># bar chart </span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> rating)) <span class="sc">+</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co"># better labels </span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(rating))) <span class="sc">+</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-21-2.png" class="img-fluid" width="672"></p>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co"># wrong geom for the task </span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> (rating))) <span class="sc">+</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>)   </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-21-3.png" class="img-fluid" width="672"></p>
</div>
</div>
<!-- ```{r} -->
<!-- ggplot(data = pei, -->
<!--        mapping = aes(x = factor(rating))) + -->
<!--   geom_bar() -->
<!-- ggplot(pei, aes( -->
<!--   x = factor(rating), -->
<!--   fill = region -->
<!-- )) + -->
<!--   geom_bar(position = "dodge") -->
<!-- ggplot(pei, aes( -->
<!--   x = factor(rating), -->
<!--   fill = region -->
<!-- )) + -->
<!--   geom_bar(position = "fill") -->
<!-- ``` -->
</section>
</section>
<section id="important-nuances" class="level3">
<h3 class="anchored" data-anchor-id="important-nuances">Important Nuances</h3>
<section id="order-of-layers-matters" class="level4">
<h4 class="anchored" data-anchor-id="order-of-layers-matters">Order of Layers Matters</h4>
<div>
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_ydensity()`).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_ydensity()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="cell quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-22-2.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</section>
<section id="global-vs.-local-mapping" class="level4">
<h4 class="anchored" data-anchor-id="global-vs.-local-mapping">Global vs.&nbsp;Local Mapping</h4>
<p>The plots below illustrate the differences between setting mappings globally, i.e.&nbsp;in <code>ggplot(aes(...))</code> layer and locally, i.e.&nbsp;in <code>geom_</code> layers.</p>
<div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_ydensity()`).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei, <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_boxplot()`).
Removed 21 rows containing non-finite values (`stat_ydensity()`).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei)  <span class="sc">+</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_boxplot()`).
Removed 21 rows containing non-finite values (`stat_ydensity()`).</code></pre>
</div>
<div class="cell quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-23-2.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-23-3.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="do">## how can we make them overlapping, without setting y globally?</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei)  <span class="sc">+</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="setting-vs.-mapping" class="level4">
<h4 class="anchored" data-anchor-id="setting-vs.-mapping">Setting vs.&nbsp;Mapping</h4>
<p>So far, we have primarily been using color with no substantive purpose: we were <em>setting</em> it to a particular value. Yet we can use color in mappings, too. - We <em>map</em> variables to aesthetics (e.g.&nbsp;color/fill or shape) if we want the visual attribute represented by that aesthetic to vary based on the values of that <em>variable</em>. This goes inside <code>aes()</code>. - Otherwise, we <em>set</em> the value of an aesthetic. The choice of this value is on us. This goes into <code>geom_</code>.</p>
<div>
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">factor</span>(region))) <span class="sc">+</span></span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># setting can overwrite the mapping </span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">factor</span>(region)), <span class="at">color =</span> <span class="st">"red"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># mixing up setting and mapping </span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="st">"red"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 21 rows containing non-finite values (`stat_boxplot()`).</code></pre>
</div>
<div class="cell quarto-layout-panel">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-25-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 33.3%;justify-content: center;">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-25-3.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</section>
</section>
</section>
<section id="extra-stuff" class="level2">
<h2 class="anchored" data-anchor-id="extra-stuff">Extra Stuff</h2>
<section id="default-theme-for-the-document" class="level3">
<h3 class="anchored" data-anchor-id="default-theme-for-the-document">Default Theme for the Document</h3>
<p>It is good practice to keep the formatting of your plots uniform across the document (article, term paper, blog post…) unless your goal is to showcase design features of course. So either try to use the same theme across the document or set certain values to these arguments for the entire document. You will try out this approach in your problem set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set theme for ggplot2 </span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="co"># best put this into setup chunk after you have loaded the packages </span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_set</span>(ggplot2<span class="sc">::</span><span class="fu">theme_minimal</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lollipop-plot-for-categorical-data" class="level3">
<h3 class="anchored" data-anchor-id="lollipop-plot-for-categorical-data">Lollipop Plot for Categorical Data</h3>
<p>There is a principle in data viz, which is commonly referred as <em>Data-to-ink ratio</em>:</p>
<blockquote class="blockquote">
<p>Graphical excellence is the well-designed presentation of interesting data—a matter of substance, of statistics, and of design … [It] consists of complex ideas communicated with clarity, precision, and efficiency. … [It] is that which gives to the viewer the greatest number of ideas in the shortest time with the least ink in the smallest space … [It] is nearly always multivariate … And graphical excellence requires telling the truth about the data..</p>
</blockquote>
<p>The extreme case of this would be just the points for the categories:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co"># from the codebook </span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="co"># In PEI: Africa = 1; Americas = 2 ; Asia = 3 ; Europe = 4 ; Oceania = 5</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>pei <span class="sc">%&gt;%</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> <span class="fu">case_when</span>(</span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Africa"</span>,</span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Americas"</span>,</span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Asia"</span>,</span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"Europe"</span>,</span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"Oceania"</span></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="co"># take dataset</span></span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span> <span class="co"># group by region</span></span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co"># calculate the count by region</span></span>
<span id="cb89-15"><a href="#cb89-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb89-16"><a href="#cb89-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> region,</span>
<span id="cb89-17"><a href="#cb89-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> count</span>
<span id="cb89-18"><a href="#cb89-18" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb89-19"><a href="#cb89-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Unlike barplots, such <em>lollipop plots</em> minimize the ratio and are thus sometimes preferred. It combines twho layers - the lines and the points on top of them.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>pei <span class="sc">%&gt;%</span> <span class="co"># take dataset</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span> <span class="co"># group by region</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co"># calculate the count by region</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> region,</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> count</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(</span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="dv">0</span>, <span class="at">yend =</span> count,</span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> region, <span class="at">xend =</span> region</span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="r4da-week02_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="resources" class="level2">
<h2 class="anchored" data-anchor-id="resources">Resources</h2>
<ul>
<li>Chapter 2 <strong>Data visualization</strong> in <a href="https://r4ds.hadley.nz/data-visualize" class="uri">https://r4ds.hadley.nz/data-visualize</a>: overview of <code>ggplot2</code> basics</li>
<li>Week 02 videos from this playlist: <a href="https://youtube.com/playlist?list=PLNUVZZ6hfXX1tyUykCWShOKZdIB0TIhtM&amp;si=jp5q61UTGIIAX4uu" class="uri">https://youtube.com/playlist?list=PLNUVZZ6hfXX1tyUykCWShOKZdIB0TIhtM&amp;si=jp5q61UTGIIAX4uu</a>: gentle intro to <code>ggplot2</code></li>
<li>Chapter 13 <strong>Layers</strong> in <a href="https://r4ds.hadley.nz/layers" class="uri">https://r4ds.hadley.nz/layers</a>: more advanced</li>
</ul>
<!-- -->

</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb91" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Lab 2: Describing Variables"</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Viktoriia Semenova"</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="an">editor:</span><span class="co"> visual</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="an">date:</span><span class="co"> "September 13, 2023"</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html: </span></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a><span class="co">    theme: slides.scss </span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a><span class="co">    code-fold: false</span></span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a><span class="co">    code-tools: true</span></span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a><span class="co">    code-summary: "Show the code"</span></span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a><span class="co">    code-overflow: wrap</span></span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a><span class="co">  pdf:</span></span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a><span class="co">    toc: true</span></span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a><span class="co">    colorlinks: true</span></span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a><span class="co">    geometry: </span></span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a><span class="co">      - top=30mm</span></span>
<span id="cb91-18"><a href="#cb91-18" aria-hidden="true" tabindex="-1"></a><span class="co">      - left=30mm</span></span>
<span id="cb91-19"><a href="#cb91-19" aria-hidden="true" tabindex="-1"></a><span class="an">highlight-style:</span><span class="co"> github</span></span>
<span id="cb91-20"><a href="#cb91-20" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb91-21"><a href="#cb91-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-22"><a href="#cb91-22" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup}</span></span>
<span id="cb91-23"><a href="#cb91-23" aria-hidden="true" tabindex="-1"></a><span class="co">#| include: false</span></span>
<span id="cb91-24"><a href="#cb91-24" aria-hidden="true" tabindex="-1"></a><span class="co"># packages needed</span></span>
<span id="cb91-25"><a href="#cb91-25" aria-hidden="true" tabindex="-1"></a><span class="co"># put all packages we use in a vector</span></span>
<span id="cb91-26"><a href="#cb91-26" aria-hidden="true" tabindex="-1"></a>p_needed <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb91-27"><a href="#cb91-27" aria-hidden="true" tabindex="-1"></a>  <span class="st">"tidyverse"</span>, <span class="co"># shortcut for ggplot2, dplyr, readr</span></span>
<span id="cb91-28"><a href="#cb91-28" aria-hidden="true" tabindex="-1"></a>  <span class="st">"janitor"</span>, <span class="co"># clean_names for datasets </span></span>
<span id="cb91-29"><a href="#cb91-29" aria-hidden="true" tabindex="-1"></a>  <span class="st">"modelsummary"</span>, <span class="co"># descriptive stats tables</span></span>
<span id="cb91-30"><a href="#cb91-30" aria-hidden="true" tabindex="-1"></a>  <span class="st">"styler"</span> <span class="co"># to style the code</span></span>
<span id="cb91-31"><a href="#cb91-31" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb91-32"><a href="#cb91-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-33"><a href="#cb91-33" aria-hidden="true" tabindex="-1"></a><span class="co"># check if they are already installed, install if not installed</span></span>
<span id="cb91-34"><a href="#cb91-34" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(</span>
<span id="cb91-35"><a href="#cb91-35" aria-hidden="true" tabindex="-1"></a>  p_needed[<span class="sc">!</span>(p_needed <span class="sc">%in%</span> <span class="fu">rownames</span>(<span class="fu">installed.packages</span>()))],</span>
<span id="cb91-36"><a href="#cb91-36" aria-hidden="true" tabindex="-1"></a>  install.packages</span>
<span id="cb91-37"><a href="#cb91-37" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb91-38"><a href="#cb91-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-39"><a href="#cb91-39" aria-hidden="true" tabindex="-1"></a><span class="co"># load the packages</span></span>
<span id="cb91-40"><a href="#cb91-40" aria-hidden="true" tabindex="-1"></a><span class="fu">lapply</span>(p_needed, library, <span class="at">character.only =</span> <span class="cn">TRUE</span>)</span>
<span id="cb91-41"><a href="#cb91-41" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-42"><a href="#cb91-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-43"><a href="#cb91-43" aria-hidden="true" tabindex="-1"></a>\newpage</span>
<span id="cb91-44"><a href="#cb91-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-45"><a href="#cb91-45" aria-hidden="true" tabindex="-1"></a><span class="fu">## Last Week</span></span>
<span id="cb91-46"><a href="#cb91-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-47"><a href="#cb91-47" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>*R universe*: <span class="in">`R`</span>, RStudio, Quarto, <span class="in">`git`</span>, GitHub</span>
<span id="cb91-48"><a href="#cb91-48" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Programming in <span class="in">`R`</span> is object-oriented</span>
<span id="cb91-49"><a href="#cb91-49" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>Quarto Markdown file (<span class="in">`qmd`</span>) file anatomy</span>
<span id="cb91-50"><a href="#cb91-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-51"><a href="#cb91-51" aria-hidden="true" tabindex="-1"></a><span class="fu">## Working with a Dataset</span></span>
<span id="cb91-52"><a href="#cb91-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-53"><a href="#cb91-53" aria-hidden="true" tabindex="-1"></a>Data usually needs to be loaded into <span class="in">`R`</span> rather than entered by hand. <span class="in">`R`</span> can load multiple objects into the environment, which means it can load multiple datasets at once. Let's start with one.</span>
<span id="cb91-54"><a href="#cb91-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-55"><a href="#cb91-55" aria-hidden="true" tabindex="-1"></a><span class="fu">### Loading datasets</span></span>
<span id="cb91-56"><a href="#cb91-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-57"><a href="#cb91-57" aria-hidden="true" tabindex="-1"></a>Today we will have a look at the dataset Perceptions of Electoral Integrity.</span>
<span id="cb91-58"><a href="#cb91-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-59"><a href="#cb91-59" aria-hidden="true" tabindex="-1"></a>First, let's obtain the dataset. We will get it from the <span class="in">`Dataverse`</span>. I have downloaded the <span class="co">[</span><span class="ot">most recent version of the data</span><span class="co">](https://dataverse.harvard.edu/dataset.xhtml?persistentId=doi:10.7910/DVN/2MFQ9K)</span> in <span class="in">`csv`</span> format and it is located in the <span class="in">`data`</span> subfolder of our <span class="in">`r4da-labs`</span> project. Our dataset comes in a common format of *comma separated values* (extension `csv`). This means that columns in a dataset are separated with a comma and system will detect columns based on these commas. There are different ways to load it, but we will be using a function from the `readr` package from *tidyverse* universe to load the dataset into the environment. We already loaded <span class="in">`tidyverse`</span> in teh setup chunk, so we carry on with loading the data right away:</span>
<span id="cb91-60"><a href="#cb91-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-61"><a href="#cb91-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-62"><a href="#cb91-62" aria-hidden="true" tabindex="-1"></a>| Format  | Package  | Load Function  | Save Function |</span>
<span id="cb91-63"><a href="#cb91-63" aria-hidden="true" tabindex="-1"></a>|---------|----------|----------------|---------------|</span>
<span id="cb91-64"><a href="#cb91-64" aria-hidden="true" tabindex="-1"></a>| <span class="in">`.csv`</span>  | <span class="in">`readr`</span>  | <span class="in">`read_csv()`</span>   | <span class="in">`write_csv()`</span> |</span>
<span id="cb91-65"><a href="#cb91-65" aria-hidden="true" tabindex="-1"></a>| <span class="in">`.xlsx`</span> | <span class="in">`readxl`</span> | <span class="in">`read_excel()`</span> |               |</span>
<span id="cb91-66"><a href="#cb91-66" aria-hidden="true" tabindex="-1"></a>| <span class="in">`.dta`</span>  | <span class="in">`haven`</span>  | <span class="in">`read_stata()`</span> | <span class="in">`write_dta()`</span> |</span>
<span id="cb91-67"><a href="#cb91-67" aria-hidden="true" tabindex="-1"></a>| <span class="in">`.tsv`</span>  | <span class="in">`readr`</span>  | <span class="in">`read_tsv()`</span>   | <span class="in">`write_tsv()`</span> |</span>
<span id="cb91-68"><a href="#cb91-68" aria-hidden="true" tabindex="-1"></a>| <span class="in">`.rda`</span>  |          | <span class="in">`load()`</span>       | <span class="in">`write()`</span>     |</span>
<span id="cb91-69"><a href="#cb91-69" aria-hidden="true" tabindex="-1"></a>| <span class="in">`.rds`</span>  | <span class="in">`readr`</span>  | <span class="in">`read_rds()`</span>   | <span class="in">`write_rds()`</span> |</span>
<span id="cb91-70"><a href="#cb91-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-71"><a href="#cb91-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-72"><a href="#cb91-72" aria-hidden="true" tabindex="-1"></a>For the most of these formats, we will need to assign the content of the file into an object in the environment. </span>
<span id="cb91-73"><a href="#cb91-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-74"><a href="#cb91-74" aria-hidden="true" tabindex="-1"></a>| **Advice:** use short but descriptive names for objects: e.g., <span class="in">`df`</span> is short but not descriptive, but <span class="in">`PEI country-level data (PEI_9.0)`</span> may be too long. <span class="in">`pei`</span> will probably be the middle ground. </span>
<span id="cb91-75"><a href="#cb91-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-76"><a href="#cb91-76" aria-hidden="true" tabindex="-1"></a>*Tab* allows for autocomplete of the name of the object. Once you have typed `""` and placed the mouse between the quotation marks, click on *Tab* and you can select the files available in that directory.   </span>
<span id="cb91-77"><a href="#cb91-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-80"><a href="#cb91-80" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-81"><a href="#cb91-81" aria-hidden="true" tabindex="-1"></a>pei <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"data/PEI country-level data (PEI_9.0).csv"</span>)</span>
<span id="cb91-82"><a href="#cb91-82" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-83"><a href="#cb91-83" aria-hidden="true" tabindex="-1"></a><span class="fu">### Exploring the Dataset</span></span>
<span id="cb91-84"><a href="#cb91-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-87"><a href="#cb91-87" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-88"><a href="#cb91-88" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(pei)</span>
<span id="cb91-89"><a href="#cb91-89" aria-hidden="true" tabindex="-1"></a><span class="fu">str</span>(pei)</span>
<span id="cb91-90"><a href="#cb91-90" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-91"><a href="#cb91-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-92"><a href="#cb91-92" aria-hidden="true" tabindex="-1"></a><span class="fu">## Descriptive Statistics </span></span>
<span id="cb91-93"><a href="#cb91-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-94"><a href="#cb91-94" aria-hidden="true" tabindex="-1"></a><span class="fu">### Range and Percentiles </span></span>
<span id="cb91-95"><a href="#cb91-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-98"><a href="#cb91-98" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-99"><a href="#cb91-99" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">summary</span>()</span>
<span id="cb91-100"><a href="#cb91-100" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">IQR</span>(<span class="at">na.rm =</span> T)</span>
<span id="cb91-101"><a href="#cb91-101" aria-hidden="true" tabindex="-1"></a><span class="fu">min</span>(pei<span class="sc">$</span>PEIIndexp) <span class="co"># returns NA</span></span>
<span id="cb91-102"><a href="#cb91-102" aria-hidden="true" tabindex="-1"></a><span class="fu">max</span>(pei<span class="sc">$</span>PEIIndexp) <span class="co"># returns NA</span></span>
<span id="cb91-103"><a href="#cb91-103" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-104"><a href="#cb91-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-105"><a href="#cb91-105" aria-hidden="true" tabindex="-1"></a>The <span class="in">`quantile()`</span> function will be very handy later: it returns the values at particular percentiles of the distribution. To remind you, the 5th percentile distribution is the point below which 5% of the data falls. The 95th percentile is, similarly, the point below which 95% of the data falls. The 50th percentile, the median, splits the data into two separate, and equal, parts. The minimum is at the 0th percentile. The maximum is at the 100th percentile. In <span class="in">`quantile()`</span>, the <span class="in">`probs`</span> argument allows us to specify the percentile(s) we want. Two of the most important percentiles are the 2.5th and 97.5th because they define the 95% interval, a central range which includes 95% of the values. Let’s look at them.</span>
<span id="cb91-108"><a href="#cb91-108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-109"><a href="#cb91-109" aria-hidden="true" tabindex="-1"></a><span class="fu">range</span>(pei<span class="sc">$</span>PEIIndexp, <span class="at">na.rm =</span> T)</span>
<span id="cb91-110"><a href="#cb91-110" aria-hidden="true" tabindex="-1"></a><span class="fu">quantile</span>(pei<span class="sc">$</span>PEIIndexp, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.5</span>, <span class="fl">0.8</span>), <span class="at">na.rm =</span> T)</span>
<span id="cb91-111"><a href="#cb91-111" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-112"><a href="#cb91-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-113"><a href="#cb91-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-114"><a href="#cb91-114" aria-hidden="true" tabindex="-1"></a><span class="fu">### Measures of Central Tendency </span></span>
<span id="cb91-115"><a href="#cb91-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-116"><a href="#cb91-116" aria-hidden="true" tabindex="-1"></a>Statistics is pretty much about typical, i.e. *central*, behavior, i.e. *tendency* of the objects. Hence understanding the ways to calculate these averages underlies the idea of stats. </span>
<span id="cb91-117"><a href="#cb91-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-120"><a href="#cb91-120" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-121"><a href="#cb91-121" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">mean</span>()</span>
<span id="cb91-122"><a href="#cb91-122" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">mean</span>(<span class="at">na.rm =</span> T)</span>
<span id="cb91-123"><a href="#cb91-123" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-124"><a href="#cb91-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-125"><a href="#cb91-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-126"><a href="#cb91-126" aria-hidden="true" tabindex="-1"></a>If the data are ordered from smallest to largest, the median is the observation right in the middle. If there are an even number of observations, there will be two values in the middle, and the median is taken as their average.</span>
<span id="cb91-127"><a href="#cb91-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-130"><a href="#cb91-130" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-131"><a href="#cb91-131" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">median</span>(<span class="at">na.rm =</span> T)</span>
<span id="cb91-132"><a href="#cb91-132" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-133"><a href="#cb91-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-134"><a href="#cb91-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-135"><a href="#cb91-135" aria-hidden="true" tabindex="-1"></a><span class="fu">### Variance and Standard Deviation </span></span>
<span id="cb91-136"><a href="#cb91-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-137"><a href="#cb91-137" aria-hidden="true" tabindex="-1"></a>The *variance* is the average squared distance from the mean. The *standard deviation* is the square root of the variance. The standard deviation is useful when considering how far the data are distributed from the mean.</span>
<span id="cb91-138"><a href="#cb91-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-139"><a href="#cb91-139" aria-hidden="true" tabindex="-1"></a>The standard deviation represents the typical deviation of observations from the mean. Usually about 70% of the data will be within one standard deviation of the mean and about 95% will be within two standard deviations. </span>
<span id="cb91-140"><a href="#cb91-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-143"><a href="#cb91-143" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-144"><a href="#cb91-144" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">var</span>(<span class="at">na.rm =</span> T)</span>
<span id="cb91-145"><a href="#cb91-145" aria-hidden="true" tabindex="-1"></a>pei<span class="sc">$</span>PEIIndexp <span class="sc">%&gt;%</span> <span class="fu">sd</span>(<span class="at">na.rm =</span> T)</span>
<span id="cb91-146"><a href="#cb91-146" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-147"><a href="#cb91-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-148"><a href="#cb91-148" aria-hidden="true" tabindex="-1"></a>**Practice: Writing Up Our Own Variance and SD calculations**</span>
<span id="cb91-149"><a href="#cb91-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-150"><a href="#cb91-150" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb91-151"><a href="#cb91-151" aria-hidden="true" tabindex="-1"></a>s^2 = \frac{\sum_{i=1}^{N}(x_i - \bar{x})^2} {N - 1}</span>
<span id="cb91-152"><a href="#cb91-152" aria-hidden="true" tabindex="-1"></a>$$</span>
<span id="cb91-153"><a href="#cb91-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-154"><a href="#cb91-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-155"><a href="#cb91-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-156"><a href="#cb91-156" aria-hidden="true" tabindex="-1"></a><span class="fu">## Visualization with `ggplot2`</span></span>
<span id="cb91-157"><a href="#cb91-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-158"><a href="#cb91-158" aria-hidden="true" tabindex="-1"></a><span class="fu">### Grammar of Graphics </span></span>
<span id="cb91-159"><a href="#cb91-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-160"><a href="#cb91-160" aria-hidden="true" tabindex="-1"></a>Recall that we have multiple layers in the plots:</span>
<span id="cb91-161"><a href="#cb91-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-162"><a href="#cb91-162" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>*data*: the dataset containing the variables of interest.</span>
<span id="cb91-163"><a href="#cb91-163" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>*aes*: aesthetic attributes of the geometric object. The most important are the names of the variables that should be on the x- and y-axes. Aesthetic attributes are mapped to variables in the dataset.</span>
<span id="cb91-164"><a href="#cb91-164" aria-hidden="true" tabindex="-1"></a><span class="ss">-   </span>*geom*: the geometric object to display, e.g., scatterplot, line, bar.</span>
<span id="cb91-165"><a href="#cb91-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-168"><a href="#cb91-168" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-169"><a href="#cb91-169" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: ggplot-anatomy</span></span>
<span id="cb91-170"><a href="#cb91-170" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb91-171"><a href="#cb91-171" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> [dataset],</span>
<span id="cb91-172"><a href="#cb91-172" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(</span>
<span id="cb91-173"><a href="#cb91-173" aria-hidden="true" tabindex="-1"></a>         <span class="at">x =</span> [x <span class="sc">-</span> variable],</span>
<span id="cb91-174"><a href="#cb91-174" aria-hidden="true" tabindex="-1"></a>         <span class="at">y =</span> [y <span class="sc">-</span> variable]</span>
<span id="cb91-175"><a href="#cb91-175" aria-hidden="true" tabindex="-1"></a>         )</span>
<span id="cb91-176"><a href="#cb91-176" aria-hidden="true" tabindex="-1"></a>       ) <span class="sc">+</span></span>
<span id="cb91-177"><a href="#cb91-177" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_xxx</span>() <span class="sc">+</span></span>
<span id="cb91-178"><a href="#cb91-178" aria-hidden="true" tabindex="-1"></a>  other options</span>
<span id="cb91-179"><a href="#cb91-179" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-180"><a href="#cb91-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-181"><a href="#cb91-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-182"><a href="#cb91-182" aria-hidden="true" tabindex="-1"></a><span class="fu">### Distributions of Continuous Variables </span></span>
<span id="cb91-183"><a href="#cb91-183" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Histograms</span></span>
<span id="cb91-184"><a href="#cb91-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-185"><a href="#cb91-185" aria-hidden="true" tabindex="-1"></a>Let's start with a *histogram*, a plot that visualizes the distribution of a *continuous* numerical variable. </span>
<span id="cb91-186"><a href="#cb91-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-187"><a href="#cb91-187" aria-hidden="true" tabindex="-1"></a>We first cut up the x-axis into a series of bins, where each bin represents a range of values. For each bin, we count the number of observations that fall in the range corresponding to that bin. We draw a bar whose height indicates the corresponding count.</span>
<span id="cb91-188"><a href="#cb91-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-191"><a href="#cb91-191" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-192"><a href="#cb91-192" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: ggplot-layers</span></span>
<span id="cb91-193"><a href="#cb91-193" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-keep: all</span></span>
<span id="cb91-194"><a href="#cb91-194" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>()</span>
<span id="cb91-195"><a href="#cb91-195" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei)</span>
<span id="cb91-196"><a href="#cb91-196" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb91-197"><a href="#cb91-197" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> pei,</span>
<span id="cb91-198"><a href="#cb91-198" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)</span>
<span id="cb91-199"><a href="#cb91-199" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb91-200"><a href="#cb91-200" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-201"><a href="#cb91-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-202"><a href="#cb91-202" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; ❓ Why is the vertical axis still empty?</span></span>
<span id="cb91-203"><a href="#cb91-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-204"><a href="#cb91-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-207"><a href="#cb91-207" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-208"><a href="#cb91-208" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: ggplot-default-histogram</span></span>
<span id="cb91-209"><a href="#cb91-209" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb91-210"><a href="#cb91-210" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> pei,</span>
<span id="cb91-211"><a href="#cb91-211" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)</span>
<span id="cb91-212"><a href="#cb91-212" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb91-213"><a href="#cb91-213" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>()</span>
<span id="cb91-214"><a href="#cb91-214" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-215"><a href="#cb91-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-216"><a href="#cb91-216" aria-hidden="true" tabindex="-1"></a>Note the message printed above:</span>
<span id="cb91-217"><a href="#cb91-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-218"><a href="#cb91-218" aria-hidden="true" tabindex="-1"></a>|  <span class="in">`stat_bin()`</span> using <span class="in">`bins = 30`</span>. Pick better value with <span class="in">`binwidth`</span>.</span>
<span id="cb91-219"><a href="#cb91-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-220"><a href="#cb91-220" aria-hidden="true" tabindex="-1"></a>The message is telling us that the histogram was constructed using <span class="in">`bins = 30`</span> for 30 equally spaced bins. This is the default value. Unless you override this default number of bins with a number you specify, <span class="in">`R`</span> will choose 30 by default. Because this is an important aspect of making a histogram, <span class="in">`R`</span> insists on informing you with this message. You make this message go away by specifying the bin number yourself, as you should *always* do.</span>
<span id="cb91-221"><a href="#cb91-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-224"><a href="#cb91-224" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-225"><a href="#cb91-225" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: ggplot-better-histogram</span></span>
<span id="cb91-226"><a href="#cb91-226" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb91-227"><a href="#cb91-227" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> pei,</span>
<span id="cb91-228"><a href="#cb91-228" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)</span>
<span id="cb91-229"><a href="#cb91-229" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb91-230"><a href="#cb91-230" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb91-231"><a href="#cb91-231" aria-hidden="true" tabindex="-1"></a>    <span class="at">bins =</span> <span class="dv">50</span>, <span class="co"># number of bins</span></span>
<span id="cb91-232"><a href="#cb91-232" aria-hidden="true" tabindex="-1"></a>    <span class="at">boundary =</span> <span class="dv">40</span> <span class="co"># there is a cutoff at 40 (for interpretation)</span></span>
<span id="cb91-233"><a href="#cb91-233" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb91-234"><a href="#cb91-234" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-235"><a href="#cb91-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-236"><a href="#cb91-236" aria-hidden="true" tabindex="-1"></a>Now let's also work on presentation and the graphic design part and make it *more aesthetically appealing* and *more reader-friendly*.</span>
<span id="cb91-237"><a href="#cb91-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-238"><a href="#cb91-238" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; ❓ What could we do  to make the plot more informative?</span></span>
<span id="cb91-239"><a href="#cb91-239" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-242"><a href="#cb91-242" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-243"><a href="#cb91-243" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(</span>
<span id="cb91-244"><a href="#cb91-244" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> pei,</span>
<span id="cb91-245"><a href="#cb91-245" aria-hidden="true" tabindex="-1"></a>  <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)</span>
<span id="cb91-246"><a href="#cb91-246" aria-hidden="true" tabindex="-1"></a>) <span class="sc">+</span></span>
<span id="cb91-247"><a href="#cb91-247" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb91-248"><a href="#cb91-248" aria-hidden="true" tabindex="-1"></a>    <span class="at">binwidth =</span> <span class="dv">2</span>, <span class="co"># each bin represents 2 points in PEI score</span></span>
<span id="cb91-249"><a href="#cb91-249" aria-hidden="true" tabindex="-1"></a>    <span class="at">boundary =</span> <span class="dv">40</span>, <span class="co"># there is a cutoff at 40, a round number </span></span>
<span id="cb91-250"><a href="#cb91-250" aria-hidden="true" tabindex="-1"></a>    <span class="at">fill =</span> <span class="st">"blue4"</span>,</span>
<span id="cb91-251"><a href="#cb91-251" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"white"</span> <span class="co"># changes color for borders</span></span>
<span id="cb91-252"><a href="#cb91-252" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb91-253"><a href="#cb91-253" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlim</span>(<span class="dv">0</span>, <span class="dv">100</span>) <span class="sc">+</span> <span class="co"># set the X axis to show all plausible values </span></span>
<span id="cb91-254"><a href="#cb91-254" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(</span>
<span id="cb91-255"><a href="#cb91-255" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Distribution of the PEI Index of Electoral Integrity"</span>,</span>
<span id="cb91-256"><a href="#cb91-256" aria-hidden="true" tabindex="-1"></a>    <span class="at">subtitle =</span> <span class="st">"Worldwide in 2022"</span>,</span>
<span id="cb91-257"><a href="#cb91-257" aria-hidden="true" tabindex="-1"></a>    <span class="at">caption =</span> <span class="st">"Data source: PEI (2023)"</span>,</span>
<span id="cb91-258"><a href="#cb91-258" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> <span class="st">"Index of Electoral Integrity"</span>,</span>
<span id="cb91-259"><a href="#cb91-259" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Count"</span></span>
<span id="cb91-260"><a href="#cb91-260" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb91-261"><a href="#cb91-261" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="co"># removes grey background for cleaner look</span></span>
<span id="cb91-262"><a href="#cb91-262" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-263"><a href="#cb91-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-264"><a href="#cb91-264" aria-hidden="true" tabindex="-1"></a>**Interpretation**</span>
<span id="cb91-265"><a href="#cb91-265" aria-hidden="true" tabindex="-1"></a>Histograms provide a view of the data density. Higher bars represent where the data are relatively more common. Histograms are especially convenient for understanding the shape of the data distribution. When data trail off to the right and has a longer right tail, the shape is said</span>
<span id="cb91-266"><a href="#cb91-266" aria-hidden="true" tabindex="-1"></a>to be **right skewed**. Data sets with the reverse characteristic – a long, thinner tail to the left – are said to be **left skewed**. We also say that such a distribution has a long left tail. Data sets that show roughly equal trailing off in both directions are called **symmetric**.</span>
<span id="cb91-267"><a href="#cb91-267" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-268"><a href="#cb91-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-269"><a href="#cb91-269" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Density Plots</span></span>
<span id="cb91-270"><a href="#cb91-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-271"><a href="#cb91-271" aria-hidden="true" tabindex="-1"></a>Let's try out a different <span class="in">`geom`</span> for numeric data: density plots. Unlike a histogram, density plot shows us the distribution as a single line and not as bins. Both of these visualizations work well for continuous variables. Here we can also see that <span class="in">`ggplot2`</span> objects (i.e. the output of <span class="in">`ggplot()`</span> function) can be stored in the environment and layers can be added at different stages. </span>
<span id="cb91-272"><a href="#cb91-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-275"><a href="#cb91-275" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-276"><a href="#cb91-276" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: ggplot-density</span></span>
<span id="cb91-277"><a href="#cb91-277" aria-hidden="true" tabindex="-1"></a>pei_density <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-278"><a href="#cb91-278" aria-hidden="true" tabindex="-1"></a>                      <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb91-279"><a href="#cb91-279" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>()</span>
<span id="cb91-280"><a href="#cb91-280" aria-hidden="true" tabindex="-1"></a>pei_density</span>
<span id="cb91-281"><a href="#cb91-281" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-282"><a href="#cb91-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-283"><a href="#cb91-283" aria-hidden="true" tabindex="-1"></a>An important argument in this geom is <span class="in">`adjust =`</span>. Let's see how different values of this argument impact the curve:</span>
<span id="cb91-284"><a href="#cb91-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-287"><a href="#cb91-287" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-288"><a href="#cb91-288" aria-hidden="true" tabindex="-1"></a>pei_density <span class="sc">+</span></span>
<span id="cb91-289"><a href="#cb91-289" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">adjust =</span> <span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"red"</span>) <span class="sc">+</span></span>
<span id="cb91-290"><a href="#cb91-290" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">adjust =</span> <span class="dv">2</span>, <span class="at">color =</span> <span class="st">"blue"</span>) </span>
<span id="cb91-291"><a href="#cb91-291" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-292"><a href="#cb91-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-293"><a href="#cb91-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-296"><a href="#cb91-296" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-297"><a href="#cb91-297" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-298"><a href="#cb91-298" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb91-299"><a href="#cb91-299" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">color =</span> region))</span>
<span id="cb91-300"><a href="#cb91-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-301"><a href="#cb91-301" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-302"><a href="#cb91-302" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb91-303"><a href="#cb91-303" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">color =</span> region, <span class="at">fill =</span> region), <span class="at">alpha =</span> <span class="fl">0.3</span>)</span>
<span id="cb91-304"><a href="#cb91-304" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-305"><a href="#cb91-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-306"><a href="#cb91-306" aria-hidden="true" tabindex="-1"></a>It is also often a good idea to add the actual observations when we are using density plots:</span>
<span id="cb91-307"><a href="#cb91-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-310"><a href="#cb91-310" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-311"><a href="#cb91-311" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-312"><a href="#cb91-312" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb91-313"><a href="#cb91-313" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">fill =</span> <span class="st">"gray"</span>) <span class="sc">+</span></span>
<span id="cb91-314"><a href="#cb91-314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_rug</span>()</span>
<span id="cb91-315"><a href="#cb91-315" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-316"><a href="#cb91-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-317"><a href="#cb91-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-318"><a href="#cb91-318" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Boxplots and Violin Plots</span></span>
<span id="cb91-319"><a href="#cb91-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-322"><a href="#cb91-322" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-323"><a href="#cb91-323" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 3</span></span>
<span id="cb91-324"><a href="#cb91-324" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-325"><a href="#cb91-325" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb91-326"><a href="#cb91-326" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() </span>
<span id="cb91-327"><a href="#cb91-327" aria-hidden="true" tabindex="-1"></a>  <span class="co"># theme(axis.ticks.y = element_blank(),</span></span>
<span id="cb91-328"><a href="#cb91-328" aria-hidden="true" tabindex="-1"></a>  <span class="co">#       axis.text.y = element_blank())</span></span>
<span id="cb91-329"><a href="#cb91-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-330"><a href="#cb91-330" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-331"><a href="#cb91-331" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb91-332"><a href="#cb91-332" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()</span>
<span id="cb91-333"><a href="#cb91-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-334"><a href="#cb91-334" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-335"><a href="#cb91-335" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb91-336"><a href="#cb91-336" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb91-337"><a href="#cb91-337" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">width =</span> <span class="fl">0.5</span>) </span>
<span id="cb91-338"><a href="#cb91-338" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-339"><a href="#cb91-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-340"><a href="#cb91-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-343"><a href="#cb91-343" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-344"><a href="#cb91-344" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-345"><a href="#cb91-345" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb91-346"><a href="#cb91-346" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb91-347"><a href="#cb91-347" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">width =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb91-348"><a href="#cb91-348" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_jitter</span>()</span>
<span id="cb91-349"><a href="#cb91-349" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-350"><a href="#cb91-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-351"><a href="#cb91-351" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-352"><a href="#cb91-352" aria-hidden="true" tabindex="-1"></a><span class="fu">### Distributions of Discrete (Numeric) and Categorial Variables </span></span>
<span id="cb91-353"><a href="#cb91-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-354"><a href="#cb91-354" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Barplot </span></span>
<span id="cb91-355"><a href="#cb91-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-356"><a href="#cb91-356" aria-hidden="true" tabindex="-1"></a><span class="in">`geom_bar()`</span> visualizes the distribution of a categorical or discrete variable. This is a simpler task than creating a histogram, as we are simply counting different categories within a categorical variable, also known as the levels of the categorical variable. Often the best way to visualize these different counts, also known as frequencies, is with a barplot.</span>
<span id="cb91-357"><a href="#cb91-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-358"><a href="#cb91-358" aria-hidden="true" tabindex="-1"></a>Let's recode the variable <span class="in">`region`</span> to be more readable and visualize the counts: </span>
<span id="cb91-359"><a href="#cb91-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-362"><a href="#cb91-362" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-363"><a href="#cb91-363" aria-hidden="true" tabindex="-1"></a>pei <span class="ot">&lt;-</span> pei <span class="sc">%&gt;%</span></span>
<span id="cb91-364"><a href="#cb91-364" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb91-365"><a href="#cb91-365" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> <span class="fu">case_when</span>(</span>
<span id="cb91-366"><a href="#cb91-366" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Africa"</span>,</span>
<span id="cb91-367"><a href="#cb91-367" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Americas"</span>,</span>
<span id="cb91-368"><a href="#cb91-368" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Asia"</span>,</span>
<span id="cb91-369"><a href="#cb91-369" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"Europe"</span>,</span>
<span id="cb91-370"><a href="#cb91-370" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"Oceania"</span></span>
<span id="cb91-371"><a href="#cb91-371" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb91-372"><a href="#cb91-372" aria-hidden="true" tabindex="-1"></a>  ) </span>
<span id="cb91-373"><a href="#cb91-373" aria-hidden="true" tabindex="-1"></a><span class="fu">count</span>(pei, region)</span>
<span id="cb91-374"><a href="#cb91-374" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-375"><a href="#cb91-375" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-376"><a href="#cb91-376" aria-hidden="true" tabindex="-1"></a>In bar plots of categorical variables with non-ordered levels, like the penguin species above, it’s often preferable to reorder the bars based on their frequencies. Doing so requires transforming the variable to a factor (how <span class="in">`R`</span> handles categorical data) and then reordering the levels of that factor. Below you can find both versons of bar plots: </span>
<span id="cb91-377"><a href="#cb91-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-380"><a href="#cb91-380" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-381"><a href="#cb91-381" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2</span></span>
<span id="cb91-382"><a href="#cb91-382" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-383"><a href="#cb91-383" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> region)) <span class="sc">+</span></span>
<span id="cb91-384"><a href="#cb91-384" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() </span>
<span id="cb91-385"><a href="#cb91-385" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-386"><a href="#cb91-386" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-387"><a href="#cb91-387" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> forcats<span class="sc">::</span><span class="fu">fct_infreq</span>(region))) <span class="sc">+</span></span>
<span id="cb91-388"><a href="#cb91-388" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() </span>
<span id="cb91-389"><a href="#cb91-389" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-390"><a href="#cb91-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-391"><a href="#cb91-391" aria-hidden="true" tabindex="-1"></a>Similar to categorical variables, we plot discrete numeric variables with this geom. According to the codebook, <span class="in">`rating`</span> variable is the rating of electoral integrity (1=very poor, 10=very good). </span>
<span id="cb91-392"><a href="#cb91-392" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-395"><a href="#cb91-395" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-396"><a href="#cb91-396" aria-hidden="true" tabindex="-1"></a><span class="co"># bar chart </span></span>
<span id="cb91-397"><a href="#cb91-397" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-398"><a href="#cb91-398" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> rating)) <span class="sc">+</span></span>
<span id="cb91-399"><a href="#cb91-399" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>() </span>
<span id="cb91-400"><a href="#cb91-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-401"><a href="#cb91-401" aria-hidden="true" tabindex="-1"></a><span class="co"># better labels </span></span>
<span id="cb91-402"><a href="#cb91-402" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-403"><a href="#cb91-403" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(rating))) <span class="sc">+</span></span>
<span id="cb91-404"><a href="#cb91-404" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>()   </span>
<span id="cb91-405"><a href="#cb91-405" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-406"><a href="#cb91-406" aria-hidden="true" tabindex="-1"></a><span class="co"># wrong geom for the task </span></span>
<span id="cb91-407"><a href="#cb91-407" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-408"><a href="#cb91-408" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> (rating))) <span class="sc">+</span></span>
<span id="cb91-409"><a href="#cb91-409" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">1</span>)   </span>
<span id="cb91-410"><a href="#cb91-410" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-411"><a href="#cb91-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-412"><a href="#cb91-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-413"><a href="#cb91-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-414"><a href="#cb91-414" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ```{r} --&gt;</span></span>
<span id="cb91-415"><a href="#cb91-415" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ggplot(data = pei, --&gt;</span></span>
<span id="cb91-416"><a href="#cb91-416" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--        mapping = aes(x = factor(rating))) + --&gt;</span></span>
<span id="cb91-417"><a href="#cb91-417" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   geom_bar() --&gt;</span></span>
<span id="cb91-418"><a href="#cb91-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-419"><a href="#cb91-419" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ggplot(pei, aes( --&gt;</span></span>
<span id="cb91-420"><a href="#cb91-420" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   x = factor(rating), --&gt;</span></span>
<span id="cb91-421"><a href="#cb91-421" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   fill = region --&gt;</span></span>
<span id="cb91-422"><a href="#cb91-422" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- )) + --&gt;</span></span>
<span id="cb91-423"><a href="#cb91-423" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   geom_bar(position = "dodge") --&gt;</span></span>
<span id="cb91-424"><a href="#cb91-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-425"><a href="#cb91-425" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ggplot(pei, aes( --&gt;</span></span>
<span id="cb91-426"><a href="#cb91-426" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   x = factor(rating), --&gt;</span></span>
<span id="cb91-427"><a href="#cb91-427" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   fill = region --&gt;</span></span>
<span id="cb91-428"><a href="#cb91-428" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- )) + --&gt;</span></span>
<span id="cb91-429"><a href="#cb91-429" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!--   geom_bar(position = "fill") --&gt;</span></span>
<span id="cb91-430"><a href="#cb91-430" aria-hidden="true" tabindex="-1"></a><span class="co">&lt;!-- ``` --&gt;</span></span>
<span id="cb91-431"><a href="#cb91-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-432"><a href="#cb91-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-433"><a href="#cb91-433" aria-hidden="true" tabindex="-1"></a><span class="fu">### Important Nuances </span></span>
<span id="cb91-434"><a href="#cb91-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-435"><a href="#cb91-435" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Order of Layers Matters</span></span>
<span id="cb91-436"><a href="#cb91-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-439"><a href="#cb91-439" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-440"><a href="#cb91-440" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2</span></span>
<span id="cb91-441"><a href="#cb91-441" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-442"><a href="#cb91-442" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb91-443"><a href="#cb91-443" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb91-444"><a href="#cb91-444" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()</span>
<span id="cb91-445"><a href="#cb91-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-446"><a href="#cb91-446" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-447"><a href="#cb91-447" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb91-448"><a href="#cb91-448" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>() <span class="sc">+</span></span>
<span id="cb91-449"><a href="#cb91-449" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() </span>
<span id="cb91-450"><a href="#cb91-450" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-451"><a href="#cb91-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-452"><a href="#cb91-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-453"><a href="#cb91-453" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Global vs. Local Mapping</span></span>
<span id="cb91-454"><a href="#cb91-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-455"><a href="#cb91-455" aria-hidden="true" tabindex="-1"></a>The plots below illustrate the differences between setting mappings globally, i.e. in <span class="in">`ggplot(aes(...))`</span> layer and locally, i.e. in <span class="in">`geom_`</span> layers. </span>
<span id="cb91-456"><a href="#cb91-456" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-459"><a href="#cb91-459" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-460"><a href="#cb91-460" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 2</span></span>
<span id="cb91-461"><a href="#cb91-461" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-462"><a href="#cb91-462" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb91-463"><a href="#cb91-463" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb91-464"><a href="#cb91-464" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>()</span>
<span id="cb91-465"><a href="#cb91-465" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-466"><a href="#cb91-466" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei, <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb91-467"><a href="#cb91-467" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb91-468"><a href="#cb91-468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="dv">1</span>))</span>
<span id="cb91-469"><a href="#cb91-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-470"><a href="#cb91-470" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei)  <span class="sc">+</span></span>
<span id="cb91-471"><a href="#cb91-471" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb91-472"><a href="#cb91-472" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp, <span class="at">y =</span> <span class="dv">1</span>))</span>
<span id="cb91-473"><a href="#cb91-473" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-474"><a href="#cb91-474" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-475"><a href="#cb91-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-478"><a href="#cb91-478" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-479"><a href="#cb91-479" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb91-480"><a href="#cb91-480" aria-hidden="true" tabindex="-1"></a><span class="do">## how can we make them overlapping, without setting y globally?</span></span>
<span id="cb91-481"><a href="#cb91-481" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei)  <span class="sc">+</span></span>
<span id="cb91-482"><a href="#cb91-482" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_violin</span>(<span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb91-483"><a href="#cb91-483" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) </span>
<span id="cb91-484"><a href="#cb91-484" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-485"><a href="#cb91-485" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-486"><a href="#cb91-486" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Setting vs. Mapping</span></span>
<span id="cb91-487"><a href="#cb91-487" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-488"><a href="#cb91-488" aria-hidden="true" tabindex="-1"></a>So far, we have primarily been using color with no substantive purpose: we were *setting* it to a particular value. Yet we can use color in mappings, too.</span>
<span id="cb91-489"><a href="#cb91-489" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>We *map* variables to aesthetics (e.g. color/fill or shape) if we want the visual attribute represented by that aesthetic to vary based on the values of that *variable*. This goes inside <span class="in">`aes()`</span>. </span>
<span id="cb91-490"><a href="#cb91-490" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Otherwise, we *set* the value of an aesthetic. The choice of this value is on us. This goes into <span class="in">`geom_`</span>. </span>
<span id="cb91-491"><a href="#cb91-491" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-494"><a href="#cb91-494" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-495"><a href="#cb91-495" aria-hidden="true" tabindex="-1"></a><span class="co">#| layout-ncol: 3</span></span>
<span id="cb91-496"><a href="#cb91-496" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-497"><a href="#cb91-497" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb91-498"><a href="#cb91-498" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">factor</span>(region))) <span class="sc">+</span></span>
<span id="cb91-499"><a href="#cb91-499" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_viridis_d</span>()</span>
<span id="cb91-500"><a href="#cb91-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-501"><a href="#cb91-501" aria-hidden="true" tabindex="-1"></a><span class="co"># setting can overwrite the mapping </span></span>
<span id="cb91-502"><a href="#cb91-502" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-503"><a href="#cb91-503" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb91-504"><a href="#cb91-504" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="fu">factor</span>(region)), <span class="at">color =</span> <span class="st">"red"</span>) </span>
<span id="cb91-505"><a href="#cb91-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-506"><a href="#cb91-506" aria-hidden="true" tabindex="-1"></a><span class="co"># mixing up setting and mapping </span></span>
<span id="cb91-507"><a href="#cb91-507" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="at">data =</span> pei,</span>
<span id="cb91-508"><a href="#cb91-508" aria-hidden="true" tabindex="-1"></a>       <span class="at">mapping =</span> <span class="fu">aes</span>(<span class="at">x =</span> PEIIndexp)) <span class="sc">+</span></span>
<span id="cb91-509"><a href="#cb91-509" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="fu">aes</span>(<span class="at">color =</span> <span class="st">"red"</span>))</span>
<span id="cb91-510"><a href="#cb91-510" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-511"><a href="#cb91-511" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-512"><a href="#cb91-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-513"><a href="#cb91-513" aria-hidden="true" tabindex="-1"></a><span class="fu">## Extra Stuff </span></span>
<span id="cb91-514"><a href="#cb91-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-515"><a href="#cb91-515" aria-hidden="true" tabindex="-1"></a><span class="fu">### Default Theme for the Document </span></span>
<span id="cb91-516"><a href="#cb91-516" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-517"><a href="#cb91-517" aria-hidden="true" tabindex="-1"></a>It is good practice to keep the formatting of your plots uniform across the document (article, term paper, blog post...) unless your goal is to showcase design features of course. So either try to use the same theme across the document or set certain values to these arguments for the entire document. You will try out this approach in your problem set.</span>
<span id="cb91-518"><a href="#cb91-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-521"><a href="#cb91-521" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-522"><a href="#cb91-522" aria-hidden="true" tabindex="-1"></a><span class="co"># set theme for ggplot2 </span></span>
<span id="cb91-523"><a href="#cb91-523" aria-hidden="true" tabindex="-1"></a><span class="co"># best put this into setup chunk after you have loaded the packages </span></span>
<span id="cb91-524"><a href="#cb91-524" aria-hidden="true" tabindex="-1"></a>ggplot2<span class="sc">::</span><span class="fu">theme_set</span>(ggplot2<span class="sc">::</span><span class="fu">theme_minimal</span>())</span>
<span id="cb91-525"><a href="#cb91-525" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-526"><a href="#cb91-526" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-527"><a href="#cb91-527" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-528"><a href="#cb91-528" aria-hidden="true" tabindex="-1"></a><span class="fu">### Lollipop Plot for Categorical Data </span></span>
<span id="cb91-529"><a href="#cb91-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-530"><a href="#cb91-530" aria-hidden="true" tabindex="-1"></a>There is a principle in data viz, which is commonly referred as *Data-to-ink ratio*:</span>
<span id="cb91-531"><a href="#cb91-531" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-532"><a href="#cb91-532" aria-hidden="true" tabindex="-1"></a><span class="at">&gt; Graphical excellence is the well-designed presentation of interesting data---a matter of substance, of statistics, and of design ... </span><span class="sc">\[</span><span class="at">It</span><span class="sc">\]</span><span class="at"> consists of complex ideas communicated with clarity, precision, and efficiency. ... </span><span class="sc">\[</span><span class="at">It</span><span class="sc">\]</span><span class="at"> is that which gives to the viewer the greatest number of ideas in the shortest time with the least ink in the smallest space ... </span><span class="sc">\[</span><span class="at">It</span><span class="sc">\]</span><span class="at"> is nearly always multivariate ... And graphical excellence requires telling the truth about the data..</span></span>
<span id="cb91-533"><a href="#cb91-533" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-534"><a href="#cb91-534" aria-hidden="true" tabindex="-1"></a>The extreme case of this would be just the points for the categories:</span>
<span id="cb91-535"><a href="#cb91-535" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-538"><a href="#cb91-538" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-539"><a href="#cb91-539" aria-hidden="true" tabindex="-1"></a><span class="co"># from the codebook </span></span>
<span id="cb91-540"><a href="#cb91-540" aria-hidden="true" tabindex="-1"></a><span class="co"># In PEI: Africa = 1; Americas = 2 ; Asia = 3 ; Europe = 4 ; Oceania = 5</span></span>
<span id="cb91-541"><a href="#cb91-541" aria-hidden="true" tabindex="-1"></a>pei <span class="sc">%&gt;%</span></span>
<span id="cb91-542"><a href="#cb91-542" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb91-543"><a href="#cb91-543" aria-hidden="true" tabindex="-1"></a>    <span class="at">region =</span> <span class="fu">case_when</span>(</span>
<span id="cb91-544"><a href="#cb91-544" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Africa"</span>,</span>
<span id="cb91-545"><a href="#cb91-545" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Americas"</span>,</span>
<span id="cb91-546"><a href="#cb91-546" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Asia"</span>,</span>
<span id="cb91-547"><a href="#cb91-547" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">4</span> <span class="sc">~</span> <span class="st">"Europe"</span>,</span>
<span id="cb91-548"><a href="#cb91-548" aria-hidden="true" tabindex="-1"></a>      region <span class="sc">==</span> <span class="dv">5</span> <span class="sc">~</span> <span class="st">"Oceania"</span></span>
<span id="cb91-549"><a href="#cb91-549" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb91-550"><a href="#cb91-550" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span> <span class="co"># take dataset</span></span>
<span id="cb91-551"><a href="#cb91-551" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span> <span class="co"># group by region</span></span>
<span id="cb91-552"><a href="#cb91-552" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co"># calculate the count by region</span></span>
<span id="cb91-553"><a href="#cb91-553" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb91-554"><a href="#cb91-554" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> region,</span>
<span id="cb91-555"><a href="#cb91-555" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> count</span>
<span id="cb91-556"><a href="#cb91-556" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb91-557"><a href="#cb91-557" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) </span>
<span id="cb91-558"><a href="#cb91-558" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-559"><a href="#cb91-559" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-560"><a href="#cb91-560" aria-hidden="true" tabindex="-1"></a>Unlike barplots, such _lollipop plots_ minimize the ratio and are thus sometimes preferred. It combines twho layers - the lines and the points on top of them. </span>
<span id="cb91-561"><a href="#cb91-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-564"><a href="#cb91-564" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb91-565"><a href="#cb91-565" aria-hidden="true" tabindex="-1"></a>pei <span class="sc">%&gt;%</span> <span class="co"># take dataset</span></span>
<span id="cb91-566"><a href="#cb91-566" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(region) <span class="sc">%&gt;%</span> <span class="co"># group by region</span></span>
<span id="cb91-567"><a href="#cb91-567" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">count =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span> <span class="co"># calculate the count by region</span></span>
<span id="cb91-568"><a href="#cb91-568" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb91-569"><a href="#cb91-569" aria-hidden="true" tabindex="-1"></a>    <span class="at">x =</span> region,</span>
<span id="cb91-570"><a href="#cb91-570" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> count</span>
<span id="cb91-571"><a href="#cb91-571" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">+</span></span>
<span id="cb91-572"><a href="#cb91-572" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb91-573"><a href="#cb91-573" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_segment</span>(</span>
<span id="cb91-574"><a href="#cb91-574" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(</span>
<span id="cb91-575"><a href="#cb91-575" aria-hidden="true" tabindex="-1"></a>      <span class="at">y =</span> <span class="dv">0</span>, <span class="at">yend =</span> count,</span>
<span id="cb91-576"><a href="#cb91-576" aria-hidden="true" tabindex="-1"></a>      <span class="at">x =</span> region, <span class="at">xend =</span> region</span>
<span id="cb91-577"><a href="#cb91-577" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb91-578"><a href="#cb91-578" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb91-579"><a href="#cb91-579" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb91-580"><a href="#cb91-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-581"><a href="#cb91-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-582"><a href="#cb91-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-583"><a href="#cb91-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-584"><a href="#cb91-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-585"><a href="#cb91-585" aria-hidden="true" tabindex="-1"></a><span class="fu">## Resources </span></span>
<span id="cb91-586"><a href="#cb91-586" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-587"><a href="#cb91-587" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Chapter 2 **Data visualization** in <span class="ot">&lt;https://r4ds.hadley.nz/data-visualize&gt;</span>: overview of <span class="in">`ggplot2`</span> basics </span>
<span id="cb91-588"><a href="#cb91-588" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Week 02 videos from this playlist: <span class="ot">&lt;https://youtube.com/playlist?list=PLNUVZZ6hfXX1tyUykCWShOKZdIB0TIhtM&amp;si=jp5q61UTGIIAX4uu&gt;</span>: gentle intro to <span class="in">`ggplot2`</span> </span>
<span id="cb91-589"><a href="#cb91-589" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Chapter 13 **Layers** in <span class="ot">&lt;https://r4ds.hadley.nz/layers&gt;</span>: more advanced </span>
</code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



</body></html>